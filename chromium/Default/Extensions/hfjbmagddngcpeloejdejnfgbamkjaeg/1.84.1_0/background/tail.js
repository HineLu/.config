"use strict";r.Vn(200,function(){function t(t){if(B||t.v||(t.v=V.b(t.u)),null==t.textSplit){t.title=n(t.title);var e=t.t,r=i(e);t.t=e.length!==t.u.length?r:"",t.textSplit=s(r,o(r),e.length-r.length,B?p-13-Math.min(t.title.length,40):p)}else t.t===t.u&&(t.t="")}function n(t){var n=t.length>p+40;return n&&(t=r.R(t,0,p+39)),e(n?t+"\u2026":t,o(t))}function e(t,n){var e,i,o,u,l;if(0===n.length)return r.P(t);for(e="",i=0,o=0;o<n.length;o+=2)u=n[o],l=n[o+1],e+=r.P(t.slice(i,u)),e+="<match>",e+=r.P(t.slice(u,l)),e+="</match>",i=l;return e+r.P(t.slice(i))}function i(t){var n=r.On(t);return!n||n>=t.length?t:t.slice(n,t.length-+(t.endsWith("/")&&!t.endsWith("://")))}function o(t){var n,e,i,r,o,l,s,f,c,a,_,g=[];for(n=0,e=x.length;n<e;n++)for(i=0,r=0,o=void 0,s=(l=t.split(H.Yt[n])).length-1,f=x[n].length;i<s;i++,r=o)o=(r+=l[i].length)+f,g.push([r,o]);if(0===g.length)return g;if(1===g.length)return g[0];for(g.sort(u),c=g[0],n=1,a=1,e=g.length;a<e;a++)c[n]>=(_=g[a])[0]?c[n]<_[1]&&(c[n]=_[1]):(c.push(_[0],_[1]),n+=2);return c}function u(t,n){return t[0]-n[0]}function s(t,n,e,i){var o,u,l,s,f,c="",a=t.length,_=a,g="";if(a<=i||(e>1?_=t.indexOf("/")+1||a:(_=t.indexOf(":"))<0?_=a:r.G.test(t.slice(0,_+3).toLowerCase())?_=t.indexOf("/",_+4)+1||a:_+=22),_<a&&n.length)for(o=n.length,u=a+8;(o-=2)>-4&&u>=_;u=o<0?0:n[o])if(l=o<0?_:n[o+1],(s=u-20-Math.max(l,_))>0&&(a-=s)<=i){_=l+(i-a);break}for(a=0,o=0;a<i&&o<n.length;o+=2)(s=(u=n[o])-20-(f=Math.max(a,_)))>0?(i+=s,g=r.R(t,a,f+11),c+=r.P(g),c+="\u2026",g=r.M(t,u-8,u),c+=r.P(g)):a<u&&(g=t.slice(a,u),c+=r.P(g)),g=t.slice(u,a=n[o+1]),c+="<match>",c+=r.P(g),c+="</match>";return t.length<=i?(g=t.slice(a),c+r.P(g)):(g=r.R(t,a,i-1>a?i-1:a+10),c+r.P(g)+"\u2026")}function c(t){return W.ti(t.t,t.title)}function a(t){var n=(t-W.ni)/18144e5;return n<0?0:n<1?n*n*.666667:n<1.000165?.666446:0}function _(t,n,e){var i=a(e),r=W.ti(t,n);return i<=r?r:(r+i)/2}function g(t,n){return n}var v=0,h=null,S=false,B=false,U=0,p=0,y=0,b=0,T=0,w=0,x=[""],k="",R="",C="",M=false,E="",O=0,D=null,I=true,N=function(t,n,e,i,r,o){this.e=t,this.u=n,this.t=e,this.title=i,this.r=r(this,o)},j=performance,P={ei:[],ii:[],ri:null,oi:"",ui:0,li:0,Ur:function(t,n){if(0!==x.length&&1&O)2===P.li?P.si():P.ri=t;else if(q.fi([],1),n)return;0===P.li&&P.ci()},ai:function(t){return 47===t.charCodeAt(0)},si:function(){var t,e,i,r,o,l,s,f,c,a,_=x.some(P.ai),m=!!G._i,d=[],v=G.gi&&G.gi.ei||P.ei,h=v.length,S=[];for(e=0;e<h;e++)W.mi((i=v[e]).di,_?i.oi:i.vi)&&(I||i.hi)&&(m&&d.push(i),S.push([-W.ti(i.di,i.vi),e]));for(m&&(G._i.ei=d),T+=t=S.length,t?(S.sort(u),w>0&&!(6&O)?(S=S.slice(w,w+y),w=0):t>w+y&&(S.length=w+y)):O^=1,r=[],o=64&U?-.666446:0,l=0,s=S;l<s.length;l++)c=(f=s[l])[0],o&&(c=c<o?c:(c+o)/2),a=new N("bookm",(i=v[e=f[1]]).In,i.di,_?i.oi:i.vi,g,-c),r.push(a),null!==i.Si&&(a.u=i.Si,a.title=n(a.title),a.textSplit="javascript: \u2026",a.t=i.Bi);q.fi(r,1)},Ui:function(){var t=chrome.bookmarks;t.onCreated.addListener(P.pi),t.onRemoved.addListener(P.yi),t.onChanged.addListener(P.yi),t.onMoved.addListener(P.pi),t.onImportBegan.addListener(function(){chrome.bookmarks.onCreated.removeListener(P.pi)}),t.onImportEnded.addListener(function(){var t=P.pi;chrome.bookmarks.onCreated.addListener(t),t()})},ci:function(){P.li=1,P.Gt&&(clearTimeout(P.Gt),P.Gt=0),chrome.bookmarks.getTree(P.bi)},bi:function(t){P.li=2,P.ei=[],P.ii=[],G.Er(2),t.forEach(P.Ti,P);var n=P.ri;if(P.ri=null,setTimeout(function(){return X.wi(P.ei)},50),P.Ui&&(setTimeout(P.Ui,0),P.Ui=null),n&&!n.o)return P.si()},Ti:function(t){var n,e,i,o=t.title,u=t.id,l=P.oi+"/"+(o||u);if(t.children)return P.ii.push(u),n=P.oi,2<++P.ui&&(P.oi=l),t.children.forEach(P.Ti,P),--P.ui,void(P.oi=n);i=(e=t.url).startsWith("javascript:"),P.ei.push({xi:u,oi:l,vi:o||u,di:i?"javascript:":e,hi:D?z.ki(e,o):1,In:i?"javascript:":e,Si:i?e:null,Bi:i?r.Q(e):null})},Gt:0,Ri:0,Ci:false,Mi:function(){var t=j.now()-P.Ri;0===P.li&&(t>=6e4||t<-5e3?(P.Gt=P.Ri=0,P.Ci=false,P.ci()):(P.ei=[],P.ii=[],P.Gt=setTimeout(P.Mi,3e4),G.Er(2)))},pi:function(){P.Ri=j.now(),P.li<2||(P.Gt=setTimeout(P.Mi,6e4),P.li=0)},yi:function(t,n){for(var e,i,r,o,u,l,s,f=P.ei,c=f.length,a=n&&n.title,_=0;_<c&&f[_].xi!==t;_++);if(_<c)return i=(e=f[_]).In,r=n&&n.url,X.Ei&&(null==a?i!==e.di||!n:null!=r&&i!==r)&&i in X.Oi&&Q.Di(i)<0&&delete X.Oi[i],void(null!=a?(e.oi=e.oi.slice(0,-e.vi.length)+(a||e.xi),e.vi=a||e.xi,r&&(e.In=r,e.di=X.Ii(r,e),X.Ni()),D&&(e.hi=z.ki(e.In,e.vi))):(f.splice(_,1),n||P.pi()));if(!(P.ii.indexOf(t)<0)){if(null!=a)return P.pi();if(!P.Ci&&X.Ei){for(o=X.Oi,u=Q.Di,l=0,s=f;l<s.length;l++)(i=s[l].In)in o&&u(i)<0&&delete o[i];P.Ci=false}return P.pi()}}},J={Ur:function(t,n){var e,i,r,o,u,l;if(!(2&O))return q.fi([],2);if(i=x.length>0,e=Q.ji){if(i)return q.fi(J.Pi(e),2);(Q.Ji>10||Q.Li>0)&&Q.Fi()}else if(r=i?function(n){if(!t.o)return q.fi(J.Pi(n),2)}:null,i&&(B||Q.Vi)?(Q.Vi>0&&clearTimeout(Q.Vi),Q.Vi=0,Q.qi(r)):(Q.Vi||(Q.Vi=setTimeout(function(){Q.Vi=0,Q.qi(r)},i?200:150)),i&&q.Ai((l=(u=(o=q.Wi).length)>0)&&"search"===o[0].t?[o[0]]:[],S&&l,0,0,u)),i)return;S=false,0===n?q.$i(J.Hi,t):chrome.sessions?chrome.sessions.getRecentlyClosed(J.Qi.bind(J,t)):J.zi([],t,{},0,0)},Pi:function(t){var n,e,i,o,u=1===x.length&&("."===x[0][0]?/^\.\w+$/.test(x[0]):(r.J(x[0],null,-2),r.Y<=2)),l=!(G.gi&&G.gi.ji),s=!!G._i,f=[],c=[-1.1,-1.1],m=[],d=W.mi,v=H.Yt[0],h=y+w,S=-1.1,B=0,U=0,p=0;for(E&&h++,U=h;--U;)c.push(-1.1,-1.1);for(h=2*h-2,l||(t=G.gi.ji),n=t.length;B<n;B++)if(e=t[B],(u?v.test(e.di):d(e.di,e.vi))&&(I||e.hi)&&(s&&f.push(e),p++,!(S>=(i=u?a(e.Gi)||1e-16*e.Gi:_(e.di,e.vi,e.Gi))))){for(U=h-2;0<=U&&c[U]<i;U-=2)c[U+2]=c[U],c[U+3]=c[U+1];c[U+2]=i,c[U+3]=B,S=c[h]}for(s&&(G._i.ji=f),T+=p,p||(O^=2),5&O?B=0:(B=2*w,w=0);B<=h&&!((i=c[B])<=0);B+=2)(e=t[c[B+1]]).In!==E?((o=new N("history",e.In,e.di,e.vi,g,i)).visit=e.Gi,m.push(o)):h--;return X.Ni(),m},Hi:function(t,n){var e,i,o,u,l,s;if(G.Ki(n),!t.o){for(e=r.D(),i=0,o=0,u=n;o<u.length;o++)(l=u[o]).incognito&&h||(s=l.url||l.pendingUrl)in e||(e[s]=1,i++);return J.zi([],t,e,w,i)}},Qi:function(t,n){var e,i,r;if(!t.o)return e=[],i={},r=-w,n.some(function(t){var n,o,u=t.tab;return!!u&&((n=u.url).length>2e3&&(u.url=n=Q.Xi(n,u)),!(!I&&!z.ki(n,u.title))&&!((o=n+"\n"+u.title)in i)&&(i[o]=1,i[n]=1,++r>0&&e.push({In:u.url,vi:u.title,Yi:t.lastModified,Zi:u.sessionId}),e.length>=y))})?J.Jr(e):J.zi(e,t,i,-r,0)},zi:function(t,n,e,i,r){chrome.history.search({text:"",maxResults:w+y*(I?1:2)+r},function(r){if(!n.o){r=r.filter(function(t){var n=t.url;return n.length>2e3&&(t.url=n=Q.Xi(n,t)),!(n in this)},e),I||(r=r.filter(function(t){return z.ki(t.url,t.title||"")}));var o=r.map(function(t){return{In:t.url,vi:t.title,Yi:t.lastVisitTime,Zi:null}});i<0?(o.length=Math.min(o.length,y-t.length),o=t.concat(o)):i>0&&(o=o.slice(i,i+y)),J.Jr(o)}})},Jr:function(t){t.forEach(J.Qr),w=0,X.Ni(),q.fi(t,2)},Qr:function(t,n,e){var i=t.In,r=new N("history",i,X.Ii(i,i),t.vi||"",g,(99-n)/100),o=t.Zi;r.visit=t.Yi,o&&(r.s=o,r.label="&#8617;"),e[n]=r}},L={Ur:function(t,n){if(1!==x.length||!(16&O)||x[0].lastIndexOf("/",x[0].length-2)>=0)return q.fi([],16);if(Q.F);else{if(!Q.ji)return n>0?q.fi([],16):Q.qi(function(){if(!t.o)return L.Ur(t,0)});L.ci(Q.ji)}return L.si()},si:function(){var n,e,i,o,u,l,s,f,c,a,m,d,v,h,B,U=r.F,p=W.Gr,b=x[0].replace("/","").toLowerCase(),k="",R=-1.1;for(i in W.Gr=3,U)i.includes(b)&&(e=U[i],(I||e.Kr>0)&&(o=_(i,"",e.Gi))>R&&(R=o,k=i));u=k.length===b.length,k&&!u&&(k.startsWith("www.")||k.startsWith(b)||(l=k.slice(k.indexOf(".")+1)).includes(b)&&(void 0,(s=U[l="www."+l])&&(I||s.Kr>0)&&(k=l,e=s)),(f=k.startsWith(b)?0:k.startsWith("www."+b)?4:-1)>=0&&(d=(a=(c=r.cn(k))[0]).length-1,(m=c[1])>1&&(!(f=k.length-f-b.length-a[d].length-1)||3===m&&f===a[d-1].length+1)&&(u=true))),k&&(T++,E=v=(e.in?"https://":"http://")+k+"/",w>0?w--:(S=u||S,n=new N("domain",v,b===x[0]?k:k+"/","",g,2),(B=(h=Q.Xr?Q.Di(v):-1)>0?Q.ji[h]:null)&&(n.visit=B.Gi),t(n),B&&(I||B.hi)&&(n.title=r.P(B.vi)),--y)),W.Gr=p,q.fi(n?[n]:[],16)},ci:function(t){var n,e,i,o,u,l,s,f,c,a,_;for(L.ci=null,n=L.Yr,e=Q.F=r.F,i=0,o=t;i<o.length;i++)l=(u=o[i]).Gi,s=u.hi,(f=n(u.In))&&(a=f.Zr,(_=e[c=f.to])?(_.Gi<l&&(_.Gi=l),_.Kr+=s,a>=7&&(_.in=8===a?1:0)):e[c]={Gi:l,Kr:s,in:8===a?1:0})},Yr:function(t){var n,e,i=t.lastIndexOf(":",5),r=i>0?t.slice(0,i):"";if("http"===r)n=7;else if("https"===r)n=8;else{if("ftp"!==r)return null;n=6}return e=t.indexOf("/",n),{to:"__proto__"!==(t=t.slice(n,e<0?t.length:e))?t:".__proto__",Zr:n}}},F={Ur:function(t,n){!(4&O)||n&&(!x.length||32&U)?q.fi([],4):q.$i(F.si,t)},si:function(t,n){var e,i,o,u,l,s,f,a,_,g,d,v,S,p,k,R,C,E,D,I,j,P,J,L,V,A,$,H,Q,z,K,Y,Z,tt,nt,et,it,rt,ot;if(G.Ki(n),!t.o){if(e=m.tr,i=x.length<=0,o=3&O,l=[],(u=!!(8&U)&&M&&i&&!B)&&n.length>w){for(s=r.D(),a=0,_=n;a<_.length;a++)s[(g=_[a]).id]=g;if(n.length>b){for(p=(S=(v=(d=s[e])?d.openerTabId:0)?s[v]:null)?S.index:d?d.index-1:0,k=S?0:b/2|0;1<--k&&p>0&&n[p-1].openerTabId===v;p--);n=p>0?n.slice(p).concat(n.slice(0,p)):n}}for(R=[],C=[],E=0,D=n;E<D.length;E++)g=D[E],!M&&h&&g.incognito||(I=g.url||g.pendingUrl,j=g.text||(g.text=X.Ii(I,g.incognito?"":I)),(i||W.mi(j,g.title))&&(P=g.windowId,!M&&C.lastIndexOf(P)<0&&C.push(P),R.push(g)));if(T+=f=R.length,f||(O^=4),w>=f&&!o)return w=0,q.fi(l,4);if(C.sort(F.no),J=i?u?F.eo:F.io:c,L=u?r.D():null,V=C.length>1?m._r:0,A=0,u)for($=0,H=R;$<H.length;$++)L[(g=H[$]).id]=(z=(Q=g.openerTabId)&&L[Q])?z<5?z+1:5:1;for(K=0,Y=R;K<Y.length;K++)Z=(g=Y[K]).id,tt=u?L[Z]:1,I=g.url||g.pendingUrl,nt=m.Ir[Z],et=new N("tab",I,g.text,g.title,J,u?++A:Z),it=V&&g.windowId!==V?C.indexOf(g.windowId)+1+":":"",rt="",it+=g.index+1,e===Z?(u||(et.r=i?1<<31:0),it="("+it+")"):nt||(it="**"+it+"**"),!h&&g.incognito&&(rt+="*"),g.discarded&&(rt+="~"),et.visit=nt,et.s=Z,et.label="#"+it+(rt&&" "+rt),tt>1&&(et.level=" level-"+tt),l.push(et);if(l.sort(q.ro),ot=l.length,o||ot>w+y||!i)for(w>0&&!o?(l=l.slice(w,w+y),ot=y,w=0):ot>w+y&&(l.length=ot=w+y),k=o?0:ot;k<ot;k++)l[k].r*=8/(k/4+1);else if(w>0){for(ot=(l=l.slice(w).concat(l.slice(0,y+w-ot))).length,k=0;k<ot;k++)l[k].r=ot-k;w=0}X.Ni(),q.fi(l,4)}},no:function(t,n){return t-n},io:function(t,n){return m.Ir[n]||(4&U?2047+n:-n)},eo:function(t,n){return 1/n}},V={hn:0,Ur:r.S,oo:function(t,n){var e,i,o,u,s,f,c,a,_,g;if(!(8&O))return q.fi([],8);if(o=(i=x).length>0?i[0]:"",0===i.length);else{if(true!==n&&"\\"===o[0]&&"\\"!==o[1])return o.length>1?i[0]=o.slice(1):i.shift(),o=R.slice(1).trimLeft(),e=V.uo(o),I=!D||I&&z.lo([o]),q.fi([e],8);u=l.dn.searchEngineMap[o]}if(true===n){if(!u)return true}else{if(!u&&!o.startsWith("vimium://"))return 0===v&&i.length<=1&&(v=i.length?V.so():-1),q.fi([],8);u&&C&&(i.push(C),w=0),i.length>1||(v=-1)}if(i.length>1&&u?(i.shift(),R.length>200&&(i=R.split(" ")).shift()):u&&(i=[]),I=!D||I&&z.lo([o]),u?(c=s=(a=r.Tn(i,u.In,u.S,[])).In,f=a.Rn):(c=s=i.join(" "),f=[]),"~"===o);else if(s.startsWith("vimium://")){if(_=r.Z(s.slice(9),1,true),g=V.fo.bind(V,i,s,c,u,f),_ instanceof Promise)return _.then(V.co.bind(V,t,g));if(_ instanceof Array)return V.co(t,g,_);_&&(s=c=_,f=[])}else s=r.J(s,null,-2);return e=V.fo(i,s,c,u,f),q.fi([e],8)},co:function(t,n,e){var i,o,u,l,s;if(!t.o){switch(e[1]){case 5:case 6:if(v=6===e[1]&&x.length>1?v:-1,!(o=e[0]))break;return C="",(x=((R="\\ "+o).length<201?R:r.R(R,0,200).trim()).split(" ")).length>1&&(x[1]=r.Mn(x[1])),V.oo(t);case 2:if(x=(u=e[0]).length>1||1===u.length&&u[0]?u:x,(l=V.hn++)>12)break;if(s=V.oo(t,true),l<=0&&(V.hn=0),true!==s)return s;break;case 0:e[0]&&(i=V.ao(n(),e))}q.fi(i||[n()],8)}},fo:function(t,n,o,u,l){var s=new N("search",n,o,(u?u.Un+": ":"")+t.join(" "),g,9);return t.length>0&&u?(s.t=V._o(o,l),s.title=e(s.title,[u.Un.length+2,s.title.length]),s.textSplit=e(s.t,l)):(s.t=r.Q(i(o)),s.title=r.P(s.title),s.textSplit=r.P(s.t)),B||(s.v=u&&u.S||V.b(n)),s.p=u?u.Un:"",s},ao:function(t,n){var e=n[0],i=new N("math","vimium://copy "+e,e,e,g,9);return--i.r,i.title='<match style="text-decoration: none;">'+r.P(i.title)+"<match>",i.textSplit=r.P(n[2]),[t,i]},b:function(t){for(var n=Q.Xr&&t.startsWith("http")?Q.Di(t):-1,e=n<0?~n-1:n,i=e<0?[]:Q.ji,r=t.indexOf(":")+3,o=0,u=0,l="",s="",f=0,c=0;o<=e&&(r="/"===t[r]?r+1:t.indexOf("/",r+1)+(u?0:1))>0;u=r){for(l=t.slice(u,r),c=e;o<=c;)if((s=i[f=o+c>>>1].In.slice(u))>l)c=f-1;else{if(s===l)return u?i[f].In:"";o=f+1}if(o<=e&&u&&"/"===(l=i[o].In)[r]&&l.length<=++r)return l}return""},go:0,Wt:0,so:function(){var t=x[0],n=l.dn.searchKeywords;return null==n?(V.Wt=V.Wt||setTimeout(V.mo,67),-2):t.length>=V.go?0:n.includes("\n"+t)?-2:0},_o:function(t,n){var e,i,o,u=n.length;if(i=r.Q(n.length>0?t.slice(0,n[0]):t),(e=r.On(i))&&(i=i.slice(e),e=0),n.length<=0)return i;for(o=n[0];n[e]=i.length,u>++e;)i+=r.Q(t.slice(o,n[e])),o=n[e];return o<t.length&&(i+=r.Q(t.slice(o))),i},uo:function(t){var n=r.J(t,null,-2),o=4===r.Y,u=new N("search",n,r.Q(i(n)),"",g,9);return u.title=o?"~: "+e(t,[0,t.length]):r.P(t),u.textSplit=r.P(u.t),B||(u.v=V.b(n)),u.p=o?"~":"",u},mo:function(){var t,n,e,i=Object.keys(l.dn.searchEngineMap),r=0;for(n=0,e=i;n<e.length;n++)r<(t=e[n].length)&&(r=t);l.fe("searchKeywords","\n"+i.join("\n")),V.go=r,V.Wt=0}},q={do:0,vo:0,Wi:null,ho:null,Ai:null,Ur:function(t){var n,e,i,r;if(q.ho&&(q.ho.o=true),n=q.ho={o:false},q.vo=0,e=1,i=-9&(O&=t[0])?t.length:2,q.Wi=[],q.do=i-1,v=w&&-1,t[1]===V){if(r=V.oo(n),i<3)return;if(r)return void r.then(q.So.bind(null,t,n,e));e=2}q.So(t,n,e)},So:function(t,n,e){for(W.ni=Date.now()-18144e5,W.Gr=3*x.length||.01,x.indexOf("__proto__")>=0&&(x=x.join(" ").replace(/(^| )__proto__(?=$| )/g," __proto_").trimLeft().split(" ")),G.Qt(),x.sort(q.Bo),H.Uo();e<t.length;e++)t[e].Ur(n,e-1)},Bo:function(t,n){return n.length-t.length||(t<n?-1:t===n?0:1)},$i:function(t,n,e){var i,r=m.nr;null===h&&(r=1!==r?r:f>=52||l.$.Ae||!!G.Ir.Ir?m.nr=0:1),1!==r?(G.Ir.po!==(i=((h=2!==r)?2:0)|(M?1:0))&&(G.Ir={Ir:null,po:i}),(e=e||G.Ir.Ir)?t(n,e):chrome.tabs.query(M?{currentWindow:true}:{},t.bind(null,n))):chrome.windows.getCurrent({populate:M},function(e){m.nr=h?0:2,n.o||q.$i(t,n,M?e.tabs:null)})},fi:function(t,n){var e=q.Wi,i=t.length;if(i>0&&(q.vo|=n,q.Wi=0===e.length?t:e.concat(t),8===n&&(S=!0,y-=i,T+=i)),0==--q.do)return e=null,q.yo()},yo:function(){var n,e,r,o,u,l,s,f,c,a,_=q.Wi;return q.Wi=null,_.sort(q.ro),w>0?(_=_.slice(w,w+b),w=0):_.length>b&&(_.length=b),H.bo=H.To=null,x.length>0&&(e=i(n=x[0]),((r=n.length!==e.length)||n.endsWith("/")&&n.length>1)&&(x[0]=r?e:n.slice(0,-1),H.wo())),_.forEach(t),o=_.length>0,u=S&&o,l=T,s=":"===k,c=2!=(f=v<0?-2!==v||o?0:3:I?x.length<=0?0:o?2:s?3:1:0)||s?0:q.vo,a=q.Ai,q.xo(),a(_,u,f,c,l)},xo:function(){q.ho=q.Ai=h=null,x=[],k=R=C=E="",H.Yt=null,W.Gr=3,W.ni=v=q.vo=U=y=b=T=p=0,O=0,S=B=false,M=false,I=true},ko:function(){var t,n,e=R;if(w=0,C="",!(0===e.length||(t=(e=e.slice(-5)).lastIndexOf("+"))<0||0!==t&&32!==e.charCodeAt(t-1))){if(e=e.slice(t),t=R.length-e.length,(n=parseInt(e,10))>=0&&"+"+n===e&&n<=(t>0?100:200))w=n;else if("+"!==e)return;R=R.slice(0,t&&t-1),C=e}},ro:function(t,n){return n.r-t.r}},A={__proto__:null,bookm:[1,P],domain:[16,L],history:[2,J],omni:[63,V,L,J,P,F],search:[8,V],tab:[4,F]},W={mi:function(t,n){var e,i,r=H.Yt;for(e=0,i=x.length;e<i;e++)if(!(r[e].test(t)||r[e].test(n)))return false;return true},Gr:3,Ro:[0,0],Co:function(t,n){var e,i=0;return(e=n.split(H.Yt[t]).length)<1?W.Ro:(i=1,H.To[t].test(n)&&(i+=1,H.bo[t].test(n)&&(i+=1)),[i,(e-1)*x[t].length])},ti:function(t,n){var e,i,r,o=0,u=0,l=0,s=0,f=!!n;for(H.To||H.Mo(),e=0,i=x.length;e<i;e++)s+=(r=W.Co(e,t))[0],l+=r[1],f&&(u+=(r=W.Co(e,n))[0],o+=r[1]);return s=s/W.Gr*W.Eo(l,t.length),0===o?n?s/2:s:s<(u=u/W.Gr*W.Eo(o,n.length))?u:(s+u)/2},ni:0,Eo:function(t,n){return t<n?t/n:n/t}},$=/[$()*+.?\[\\\]\^{|}]/g,H={Yt:null,To:null,bo:null,Uo:function(){var t,n,e,i=H.Yt=[];for(H.To=H.bo=null,t=0,n=x;t<n.length;t++)e=n[t],i.push(new RegExp(e.replace($,"\\$&"),e!==e.toUpperCase()&&e.toLowerCase()===e?"i":""))},Mo:function(){var t,n,e,i,r,o=H.To=[],u=H.bo=[];for(t=0,n=H.Yt;t<n.length;t++)i="\\b"+(e=n[t]).source,r=e.flags,o.push(new RegExp(i,r)),u.push(new RegExp(i+"\\b",r))},wo:function(){H.Yt&&(H.Yt[0]=new RegExp(x[0].replace($,"\\$&"),H.Yt[0].flags))}},Q={Oo:0,Ji:0,Li:0,Xr:false,Vi:0,ji:null,Do:null,F:null,qi:function(t){Q.Do?t&&Q.Do.push(t):(Q.Do=t?[t]:[],Q.Oo=Date.now(),Q.Vi||chrome.history.search({text:"",maxResults:2e4,startTime:0},function(t){setTimeout(Q.Io,0,t)}))},Io:function(t){var n,e,i,r,o,u,l;for(Q.Io=null,n=0,e=t.length;n<e;n++)(r=(i=t[n]).url).length>2e3&&(r=Q.Xi(r,i)),t[n]={di:r,vi:i.title,Gi:i.lastVisitTime,hi:1,In:r};if(D)for(o=0,u=t;o<u.length;o++)0===z.ki((l=u[o]).di,l.vi)&&(l.hi=0);setTimeout(function(){setTimeout(function(){var t,n,e,i,r,o,u,l,s=Q.ji;for(t=s.length-1;0<t;)for(r=(i=(n=s[t]).di=X.Ii(e=n.In,n)).length>=e.length;0<=--t&&!((u=(o=s[t]).In).length>=e.length)&&e.startsWith(u);)o.In=e.slice(0,u.length),l=r?u:X.Ii(u,o),o.di=r||l.length<u.length?i.slice(0,l.length):l;Q.F||setTimeout(function(){L.ci&&L.ci(Q.ji)},200)},100),Q.ji.sort(function(t,n){return t.In>n.In?1:-1}),Q.Xr=true,chrome.history.onVisitRemoved.addListener(Q.No),chrome.history.onVisited.addListener(Q.jo)},100),Q.ji=t,Q.qi=function(t){t&&t(Q.ji)},Q.Do&&Q.Do.length>0&&setTimeout(function(t){var n,e;for(n=0,e=t;n<e.length;n++)(0,e[n])(Q.ji)},1,Q.Do),Q.Do=null},jo:function(t){var n,e,i,r,o,u,l,s,f,c=t.url;if(c.length>2e3&&(c=Q.Xi(c,t)),n=t.lastVisitTime,e=t.title,i=++Q.Ji,r=Q.F,(o=Q.Di(c))<0&&Q.Li++,(i>59||i>10&&Date.now()-Q.Oo>3e5)&&Q.Fi(),u=o>=0?Q.ji[o]:{di:"",vi:e,Gi:n,hi:D?z.ki(c,e):1,In:c},r&&(s=L.Yr(c))&&((l=r[s.to])?(l.Gi=n,o<0&&(l.Kr+=u.hi),s.Zr>=7&&(l.in=8===s.Zr?1:0)):r[s.to]={Gi:n,Kr:u.hi,in:8===s.Zr?1:0}),o>=0)return u.Gi=n,void(e&&e!==u.vi&&(u.vi=e,G.Wt&&G.Er(1),D&&(f=z.ki(c,e),u.hi!==f&&(u.hi=f,l&&(l.Kr+=f||-1)))));u.di=X.Ii(c,u),Q.ji.splice(~o,0,u),G.Wt&&G.Er(1)},No:function(t){var n,e,i,o,u,l,s,f,c,a,_,g,m,d;if(X.Po.length=0,n=X.Oi,G.Er(1),t.allHistory){for(Q.ji=[],Q.F&&(Q.F=r.F=r.D()),e=r.D(),i=0,o=P.ei;i<o.length;i++)(l=n[(u=o[i]).In])&&(e[u.In]=l);X.Oi=e}else for(s=Q.Di,f=Q.ji,c=Q.F,_=0,g=t.urls;_<g.length;_++)(u=s(m=g[_]))>=0&&(c&&f[u].hi&&(d=L.Yr(m))&&(a=c[d.to])&&--a.Kr<=0&&delete c[d.to],f.splice(u,1),delete n[m])},Xi:function(t,n){var e=t.lastIndexOf(":",9),i=e>0&&"://"===t.substr(e,3),o=n.title;return t=t.slice(0,(i?t.indexOf("/",e+4):e)+320)+"\u2026",o&&o.length>160&&(n.title=r.R(o,0,160)),t},Fi:function(){var t=Date.now();if(Q.Li<=0);else{if(t<Q.Oo+1e3&&t>=Q.Oo)return;setTimeout(chrome.history.search,50,{text:"",maxResults:Math.min(999,Q.Ji+10),startTime:t<Q.Oo?t-3e5:Q.Oo},Q.Jo)}return Q.Oo=t,Q.Li=Q.Ji=0,X.Ni()},Jo:function(t){var n,e,i,r,o,u,l=Q.ji,s=Q.Di;if(!(l.length<=0))for(n=0,e=t;n<e.length;n++){if((r=(i=e[n]).url).length>2e3&&(i.url=r=Q.Xi(r,i)),(o=s(r))<0)Q.Li--;else if(!(u=i.title)||u===l[o].vi)continue;Q.Ji--,Q.jo(i)}},Di:function(t){for(var n="",e=Q.ji,i=e.length-1,r=0,o=0;r<=i;)if((n=e[o=r+i>>>1].In)>t)i=o-1;else{if(n===t)return o;r=o+1}return~r}},z={ki:function(t,n){var e,i,r;for(e=0,i=D;e<i.length;e++)if(n.includes(r=i[e])||t.includes(r))return 0;return 1},lo:function(t){var n,e,i,r,o,u;if(D)for(n=0,e=t;n<e.length;n++)for(i=e[n],r=0,o=D;r<o.length;r++)if(u=(u=o[r]).trim(),i.includes(u)||u.length>9&&i.length+2>=u.length&&u.includes(i))return true;return false},Lo:function(){var t,n,e,i,r,o,u,l,s;if(P.ei)for(t=0,n=P.ei;t<n.length;t++)(e=n[t]).hi=D?z.ki(e.di,e.oi):1;if(Q.ji)for(i=Q.F,r=0,o=Q.ji;r<o.length;r++)e=o[r],u=D?z.ki(e.di,e.vi):1,e.hi!==u&&(e.hi=u,i&&(l=L.Yr(e.In))&&(s=i[l.to])&&(s.Kr+=u||-1))},Fo:function(t){var n,e,i,r=[];for(n=0,e=t.split("\n");n<e.length;n++)(i=e[n]).trim()&&"#"!==i[0]&&r.push(i);D=r.length>0?r:null,(Q.ji||P.ei)&&setTimeout(z.Lo,100)}},G={gi:null,_i:null,Ir:{Ir:null,po:0},Vo:[],Wt:0,qo:0,Qt:function(){var t,n,e,i,r,o=x,u=null,s=0,f=o.join(" ");for(t=G.Vo,n=f?t.length:0;0<=--n;)if(t[n].Ao||!I){for(e=t[n].Sr,i=0,r=0;i<e.length&&r<o.length;r++)o[r].includes(e[i])&&i++;if(i>=e.length){u=t[n];break}}G.gi=u,u&&(l.oe.t<200||!u.ji||u.ji.length>1e3)&&(s=j.now())-u.Gi<Math.max(300,1.3*l.oe.t)?(G._i=u,u.Sr=o.slice(0)):!f||u&&f===u.Sr.join(" ")||!(f.length>4||/\w\S|[^\x00-\x80]/.test(f))?G._i=null:(G._i={Sr:o.slice(0),Ao:I,Gi:s||j.now(),ji:u&&u.ji,ei:u&&u.ei},G.Vo.push(G._i),G.Wt||(G.Wt=setInterval(G.Wo,6e3)))},Wo:function(){for(var t=G.Vo,n=-1,e=j.now()-5983;++n<t.length&&t[n].Gi<e;);++n<t.length?t.splice(0,n):(t.length=0,clearInterval(G.Wt),G.Wt=0)},Er:function(t){var n,e,i;for(n=0,e=G.Vo;n<e.length;n++)i=e[n],t<2?i.ji=null:t<3?i.ei=null:G.Ir.Ir=null},Ki:function(t){G.Ir.Ir!==t&&(G.qo&&(clearTimeout(G.qo),G.qo=0),G.Ir.Ir=t,t&&(G.qo=setTimeout(G.Ki,3e3,null)))}},K=decodeURIComponent,X={Ii:function(t,n){if(t.length>=400||t.lastIndexOf("%")<0)return t;try{return K(t)}catch(t){}return X.Oi[t]||(n&&X.Po.push(n),t)},wi:function(t){for(var n,e,i=X.Oi,r=X.Po,o=-1,u=t.length;;)try{for(;++o<u;)(n=t[o]).di=(e=n.In).length>=400||e.lastIndexOf("%")<0?e:K(e);break}catch(t){n.di=i[e]||(r.push(n),e)}X.Ni()},Oi:r.D(),Po:[],$o:-1,Ni:function(){0!==X.Po.length&&-1===X.$o&&(X.$o=0,setTimeout(X.Ho,17,null))},Ho:function(t){for(var n,e,i,r;X.$o<X.Po.length;X.$o++){if(!(n=X.Oi[r=(i="string"==typeof(e=X.Po[X.$o]))?e:e.In]))return t||(t=X.Qo())?(t.open("GET",X.zo+(f>=66?r.replace("#","%25"):r),true),t.send()):(X.Po.length=0,void(X.$o=-1));i||(e.di=n)}},Go:function(){if(!(X.$o<0)){var t=this.responseText,n=X.Po[X.$o++];"string"!=typeof n?X.Oi[n.In]=n.di=t:X.Oi[n]=t,X.$o<X.Po.length?X.Ho(this):(X.Po.length=0,X.$o=-1)}},Ei:true,zo:"1",Qo:function(){if(!X.zo)return null;var t=new XMLHttpRequest;return t.responseType="text",t.onload=X.Go,t},Ko:function(t){var n=!!t&&!(t=t.toLowerCase()).startsWith("utf"),e=n?"data:text/plain;charset="+t+",":"",i=X.zo;e!==i&&(X.zo=e,n?"1"!==i&&setTimeout(function(){return Q.ji&&X.wi(Q.ji),X.wi(P.ei)},100):(X.Oi=r.D(),X.Po.length=0),X.Ei!==n&&(X.Po=n?[]:{length:0,push:r.S},X.Ei=n,X.$o=-1))}};d={Ur:function(t,n,e){S=false,k=R=(t=t.trim())&&t.replace(r.B," "),q.ko(),x=(t=R)?(t=t.length<201?t:r.R(t,0,200).trimRight()).split(" "):[],(p=0|n.c||128)&&(p-=t.replace(/[\u2e80-\u2eff\u2f00-\u2fdf\u3000-\u303f\u31c0-\u31ef\u3200-\u9fbf\uf900-\ufaff\ufe30-\ufe4f\uff00-\uffef]/g,"aa").length-t.length),p=Math.max(50,Math.min(p,320)),B=!!(1&(U=n.f)),b=y=Math.min(Math.max(3,0|n.r||10),25),T=0,q.Ai=e;var i="bomni"===n.o?(U|=64,A.omni):A[n.o],o=x.length>=1?x[0]:"",u=n.t;i===A.tab&&(M=!!(2&U)),S=null!=i&&1===i.length,2===o.length&&":"===o[0]&&(i="b"===(o=o[1])?A.bookm:"h"===o?A.history:"t"===o||"w"===o?(M="w"===o,A.tab):"B"===o?(U|=64,A.omni):"H"===o?(U|=32,A.omni):"d"===o?A.domain:"s"===o?A.search:"o"===o?A.omni:null)&&(S=1===i.length,x.shift(),R=R.slice(3),0!==u&&(i=null)),x.length>0&&(x[0]=r.Mn(x[0])),I=!D||z.lo(x),O=0!==u?u:63,q.Ur(i||A.omni)},Ar:function(t,n,e){switch(n){case"tab":chrome.tabs.remove(+t,function(){var t=r.T();return t||G.Ki(null),e(!t),t});break;case"history":var i=!Q.Xr||Q.Di(t)>=0;chrome.history.deleteUrl({url:t}),i&&G.Er(1),e(i)}},Xt:function(){G.Ir.Ir&&(1&G.Ir.po||!(2&G.Ir.po)!=(2===m.nr))&&G.Ki(null)},Xo:z.lo},l.ve.omniBlockList=z.Fo,l.ge("omniBlockList"),l.ve.localeEncoding=X.Ko,l.ge("localeEncoding"),r.Vn(80,function(){l.ge("searchEngines",null)})});var d={Ur:function(t,n,e){r.Vn(210,function(){return d.Ur(t,n,e)})},Ar:r.S,Xt:r.S};r.Vn(1e3,function(){function t(n,i){function o(t){var n,i,o,u;if(U){for(n in r.O(t),U)!(o=(i=n.split(":")[0])===n)&&i in U||e(i,null!=(u=o?U[n]:null)?u.newValue:t[i],t);U=null}}var u,s,f;if("sync"===i){if(r.O(n),u=l.Ue&&l.Ue())return U&&r.y(n,U),U=n,void u.then(function(){return t({},i)});for(s in U&&(r.y(n,U),U=null),n){if(f=n[s],8===(s.includes(":")?8:e(s,null!=f?f.newValue:null)))return U=n,void h().get(o);delete n[s]}}}function n(){var t,n=[];for(t=0;t<arguments.length;t++)n[t]=arguments[t];console.log.apply(console,[(new Date).toLocaleString()].concat.call([].slice.call(arguments,0)))}function e(t,e,r){var o,u,s,c,a,g;if(t in l.se&&!(t in l.de)&&_(t)){if(o=l.se[t],u=e&&"object"==typeof e&&e.$_serialize||""){if("split"===u&&!r)return 8;if(8===(e=(function(t,e,i){var r,o,u,s,c="";switch(e.$_serialize){case"split":for(r=e.k,o=e.s,u=0;u<o;u++){if(!(s=i[t+":"+u])||!s.startsWith(r))return 8;c+=s.slice(r.length)}break;case"single":return JSON.parse(f(JSON.stringify(e.d)));default:return n("Error: can not support the data format in synced settings data:",t,":",e.$_serialize),null}return"string"==typeof l.se[t]?c=f(c):(c=f(JSON.stringify(c)),JSON.parse(c.slice(1,-1)))})(t,e,r)))return}null!=e?(s=y?o:l.le(t),(g="object"!=typeof o)?(a=e,c=s):(a=JSON.stringify(e),c=JSON.stringify(s)),a!==c&&(a===(s=g?o:JSON.stringify(o))&&(e=o),y||n("sync.this: update",t,"string"==typeof e?(e.length>32?e.slice(0,30)+"...":e).replace(/\n/g,"\\n"):e),i(t,e))):null!=localStorage.getItem(t)&&(y||n("sync.this: reset",t),i(t,o))}}function i(t,n){var e="keyMappings"===t?"Commands":t.startsWith("exclusion")?"Exclusions":"";if(!e)return o(t,n);Promise.all(["Exclusions"===e&&r.pn("Commands"),r.pn(e)]).then(function(){return o(t,n)}),r.Bn()}function o(t,n){B=t,l.fe(t,n),B="",t in l.he&&l.be({N:6,d:[l.he[t]]})}function u(t,n){_(t)&&t!==B&&(S||(setTimeout(a,800),S=r.D()),S[t]=n)}function s(t,e){var i,o,u;h()?(o=chrome.storage.local,u=function(){var e=r.T();if(e)return n("storage.local: Failed to update",t,":",e.message||e),e},null==e?o.remove(t,u):o.set(((i={})[t]=e,i),u)):l.me=r.S}function f(t){var n={Q:'\\"',S:"\\\\",d:"`",l:"<",n:"\u2029",q:'"',r:"\u2028"};return t.replace(/`[QSdlnqr]/g,function(t){return n[t[1]]})}function c(t,n,e){var i,r,o,u,s,f,c,a,_,g,m,d;if(n&&!("string"!=typeof n?"object"!=typeof n:n.length<8192/6-40)&&(r="",!((i=JSON.stringify(n)).length<8192/6-40))){if(4*(i=i.replace(/[<`\u2028\u2029]/g,function(t){return"<"===t?"`l":"`"===t?"`d":"\u2028"===t?"`r":"`n"})).length<8093)return i;if((r=e.encode(i)).length<8093)return i;for(o=0,u=Date.now().toString(36)+":",s={},i="string"==typeof l.se[t]?i.slice(1,-1):(function(t){return t.replace(/"|\\[\\"]/g,function(t){return'"'===t?"`q":'\\"'===t?"`Q":"`S"})})(i),p||(p=new TextDecoder),f=0,c=(r=e.encode(i)).length;f<c;){for(a=Math.min(f+8134,c),_=void 0,g=0;a<c&&128==(192&r[a]);a--);if((g=(i=(_=p.decode(r.subarray(f,a))).slice(-6)).lastIndexOf("\\"))>i.length-2)_+="b",g=1;else if(g>0&&"u"===i[g+1])for(m=g=i.length-g;m++<6;_+="b");else g=0;if(_=JSON.parse('"'+_+'"'),g&&((d=_.endsWith("b"))||(a-=g),_=_.slice(0,g>1&&d?g-6:-1)),s[t+":"+o++]=u+_,f=a,o>=13)break}return s[t]={$_serialize:"split",k:u,s:o},s}}function a(){var t,e,i,o,s,f,a,_,g=S,m=[],d=[],v=[],B=r.D(),U={};if(S=null,g&&l.me===u){for(e in t=new TextEncoder,g)for(o=g[i=e],f="string"==typeof(s=l.se[i])||"object"==typeof s&&"vimSync"!==i?0:13,null!=o?(a=c(i,o,t))&&"object"==typeof a?(B[i]=a,f=a[i].s):(U[i]=a?{$_serialize:"single",d:JSON.parse(a)}:o,d.push(i)):(v.push(i),m.push(i));f<13;f++)v.push(i+":"+f);for(i in p=t=null,m.length>0&&n("sync.cloud: reset",m.join(", ")),v.length>0&&h().remove(v),d.length>0&&(n("sync.cloud: update",d.join(", ")),h().set(U)),_=function(t){h().set(B[t],function(){var e=r.T();return e?n("Failed to update",t,":",e.message||e):n("sync.cloud: update (serialized) "+t),e})},B)_(i)}}function _(t){return!(t in T)}function g(t){l.Wn.Kn=null,r.Vn(t,function(){chrome.storage.local.get(function(t){var e,i,o,u,f,c,a,g,m;if(!l.le("vimSync")&&localStorage.length){for(n("storage.local: backup all settings from localStorage"),r.O(t),e=0,i=localStorage.length;e<i;e++)(o=localStorage.key(e))in l.se&&(_(o)||"keyboard"===o)&&(u=l.se[o],f=t[o],a=c=l.le(o),g=f,"object"==typeof u&&(g=JSON.stringify(f),a=JSON.stringify(c)),a!==g&&s(o,c),delete t[o]);(m=Object.keys(t)).length>0&&chrome.storage.local.remove(m)}})})}function m(i,o,u){var f,c,a,g,m,d,v,S,U,p,T,w,x,k;if(2&o&&chrome.storage.local.get(function(t){var e,i,s,f,c=r.T();if(c)return l.Ue=null,(o-=2)||u(),c;for(s in r.O(t),i=void 0!==(e=t.vimSync)||Object.keys(t).length>0,delete t.vimSync,i&&n("storage.local: restore settings to localStorage"),t)s in l.se&&(B=s,f=null==(f=t[s])?l.se[s]:f,l.fe(s,f));B="",null!=e&&l.fe("vimSync",e),r.Vn(100,function(){l.be({N:6,d:l.te})}),(o-=2)||u()}),2!==o){if(r.O(i),!(f=i.vimSync||l.le("vimSync")))return b=f,l.me=s,void(--o||u());for(a in i.vimSync||(n("sync.cloud: enable vimSync"),i.vimSync=f,h().set({vimSync:f})),c=[],i)a in l.Pe&&c.push(a);for(g=[],m={},d=0,v=c;d<v.length;d++)for(a=v[d],S=l.Pe[a],U=-1,p=void 0;U<13&&(p=U<0?a:a+":"+U)in i;U++)m[T=U<0?S:S+":"+U]=i[T]=i[p],delete i[p],g.push(p);for(c.length>0&&(chrome.storage.onChanged.removeListener(t),l.me=r.S,h().remove(g),h().set(m,r.T),c.length=0),U=0,w=localStorage.length;U<w;U++)!((a=localStorage.key(U))in i)&&a in l.se&&_(a)&&c.push(a);for(x=0,k=c;x<k.length;x++)e(a=k[x],null);for(a in i)a.includes(":")||e(a,i[a],i);l.ge("vimSync"),r.Vn(4,function(){--o||u()}),y&&n("sync.cloud: download settings to localStorage")}}var d,v,h=function(){return d||(d=chrome.storage&&chrome.storage.sync)},S=null,B="",U=null,p=null,y=null,b=l.le("vimSync"),T=r.O({findModeRawQueryList:1,innerCSS:1,keyboard:1,newTabUrl_f:1,vomnibarPage_f:1});if(l.ve.vimSync=function(n){if(b=n,h()){var e=chrome.storage.onChanged;if(!n)return e.removeListener(t),void(l.me!==s&&(l.me=s,g(600)));l.me!==u&&(e.addListener(t),l.me=u,chrome.storage.local.clear())}},l.Ue=function(){if(y);else{if(localStorage.length)return null;r.Bn(),y=Promise.all([r.pn("Commands"),r.pn("Exclusions")]).then(function(){return new Promise(function(t){b?h().get(function(n){var e=r.T();return e?(l.Ue=null,t()):m(n,1,t),e}):m({},2,t)}).then(function(){y=null})})}return y},false===b||!b&&!l.Wn.Gn)return v=l.Wn.Kn,l.Wn.Kn=v?null:g,v&&g(6e3),void(l.me=s);r.Bn(),h()?h().get(function(t){var e=r.T();if(e)return n("Error: failed to get storage:",e,"\n\tSo disable syncing temporarily."),l.ve.vimSync=l.me=r.S,l.Ue=null,e;y=Promise.resolve(),y=new Promise(function(n){return m(t,3,n)}).then(function(){y=null})}):l.Ue=null}),r.Vn(150,function(){var t,e,i,o,u=chrome.browserAction;u&&(true,i=l.ve.showActionIcon,o=function(n){var i,o=l.He[n];(i=new XMLHttpRequest).open("GET",o,true),i.responseType="arraybuffer",i.onload=function(){(function(i){var o,u,l,s=new Uint8ClampedArray(i),f=i.byteLength/5,c=0|Math.sqrt(f/4),_=c+c,g=r.D();for(g[c]=new ImageData(s.subarray(0,f),c,c),g[_]=new ImageData(s.subarray(f),_,_),t[n]=g,o=e[n],delete e[n],u=0,l=o.length;u<l;u++)a.br(o[u],n,true)})(this.response)},i.send()},l.Wn.Xn=function(n){var i,o,u;if(null==n)return!!t;if(n){if(!t)for(o in t=[null,null,null],e=r.D(),i=a.we())0!==(u=i[+o][0].s).s&&a.br(u.t,u.s)}else t&&setTimeout(function(){l.le("showActionIcon")||(t=null,e=null)},200)},a.br=function(n,i,l){var s,f,c;(s=t[i])?(f=u.setIcon,c={tabId:n,imageData:s},l?f(c,r.T):f(c)):e[i]?e[i].push(n):(setTimeout(o,0,i),e[i]=[n])},l.ve.showActionIcon=function(t){i(t),l.Wn.Xn(t);var e=n("name");t||(e+="\n\n"+n("noActiveState")),u.setTitle({title:e})},l.ge("showActionIcon"))}),r.Vn(600,function(){function t(){v&&(v.Yo=null),S=U=v=_=null,p&&clearTimeout(p),h&&clearTimeout(h),y=T=w=p=h=0,g="",r.x()}function n(){var e=Date.now()-y;if(e>5e3||e<-5e3)return t();p=setTimeout(n,3e4)}function e(){var t,n;if(h=0,(t=v)&&!t.Zo)return v=null,t.Yo?((n=Date.now())<y&&(y=n-1e3),o(t.et,t.Yo)):void 0}function i(t,n,e,i,o){var u,l,s,f,a,d,h,B,p,y,x,k,R,C,M,E,O;if(t.Yo){for(v=null,l=(u=n.length>0)?n[0]:null,f={},T=i,w=o,u&&(c||null!=n[0].s)&&(S=r.D()),U=[],a=r.D(),d=0,h=e?0:1,B=n.length;d<B;d++)y=(p=n[d]).title,x=p.u,k=p.e,R="",C=null!=p.s,M=c&&!(e&&0===d)&&("tab"===k?p.s!==m.tr:"history"===k&&!C),x in a?x=":"+(d+h)+" "+x:a[x]=1,M&&(f.po=k,R=" ~"+(d+h)+"~"),E={content:x,description:R="<url>"+p.textSplit+(R=y?"</url><dim> - "+y+R+"</dim>":R?"</url><dim>"+R+"</dim>":"</url>")},M&&(E.deletable=true),C&&(f.Zi=p.s),(M||C)&&(S[x]=f,f={}),U.push(E);if(_=t.et,e)if("search"===l.e){if(s=((O=l.p)&&"<dim>"+r.P(O)+" - </dim>")+"<url>"+l.textSplit+"</url>",b=2,l=n[1])switch(l.e){case"math":U[1].description="<dim>"+l.textSplit+" = </dim><url><match>"+l.t+"</match></url>"}}else b=3,s=U[0].description;else 1!==b&&(s="<dim>Open: </dim><url>%s</url>",b=1);e&&(g=n[0].u,U.shift()),s&&chrome.omnibox.setDefaultSuggestion({description:s}),t.Yo(U),r.x()}else v===t&&(v=null)}function o(t,o){var u,s,f,c;t=t.trim().replace(r.B," "),v&&(v.Yo=(u=t===v.et)?o:null,u)||(t!==_?1===T&&t.startsWith(_)?o([]):(v={Yo:o,et:t,Zo:false},h||(s=Date.now(),(f=l.oe.t+y-s)>30&&f<3e3?h=setTimeout(e,f):(v.Zo=true,p||(p=setTimeout(n,3e4)),y=s,S=U=null,g="",c=T<2||!t.startsWith(_)?0:3===T?t.includes(" ")?0:8:w,d.Ur(t,{o:"omni",t:c,r:x,c:B,f:1},i.bind(null,v))))):U&&o(U))}function u(t,n,e){return t?":"===t[0]&&/^:([1-9]|1[0-2]) /.test(t)&&(t=t.slice(" "===t[2]?3:4)):t=r.J(""),"file://"===t.slice(0,7).toLowerCase()&&(t=r.Pn(t)),null!=e?a.Lr({s:e}):a.Dr({u:t,o:true,r:"currentTab"===n?0:"newForegroundTab"===n?-1:-2})}var s,c,_,g,v,h,S,B,U,p,y,b,T,w,x,k=chrome.omnibox;k&&(c=!!(s=k.onDeleteSuggestion)&&"function"==typeof s.addListener,_=null,g="",v=null,h=0,S=null,B=128,U=null,p=0,b=0,T=0,w=0,x=f<60?6:12,k.onInputStarted.addListener(function(){if(chrome.windows.getCurrent(function(t){var n=t&&t.width;B=n?Math.floor((n-160/devicePixelRatio)/7.72):128}),p)return t()}),k.onInputChanged.addListener(o),k.onInputEntered.addListener(function n(i,o){var l,s=v;if(s&&s.Yo){if(s.Yo=n.bind(null,i,o),s.Zo)return;return h&&clearTimeout(h),e()}return i=i.trim().replace(r.B," "),null===_&&i?d.Ur(i,{o:"omni",t:0,r:3,c:B,f:1},function(t,n){return n?u(t[0].u,o,t[0].s):u(i,o)}):(g&&i===_&&(i=g),l=S&&S[i]&&S[i].Zi,t(),u(i,o,l))}),c&&s.addListener(function(t){var n=parseInt(t.slice(t.lastIndexOf("~",t.length-2)+1))-1,e=U&&U[n].content,i=e&&S&&S[e]||null,r=i&&i.po;if(r)return":"===e[0]&&(e=e.slice(e.indexOf(" ")+1)),a.Ar({t:r,u:"tab"===r?i.Zi:e});console.log("Error: want to delete a suggestion but no related info found (may spend too long before deleting).")}))}),chrome.runtime.onInstalled.addListener(l.Wn.Yn=function(t){var e=t.reason;if("install"===e)e="";else{if("update"!==e)return;e=t.previousVersion}l.Wn.Yn&&(chrome.runtime.onInstalled.removeListener(l.Wn.Yn),l.Wn.Yn=null,r.Vn(500,function(){var i,o;chrome.tabs.query({status:"complete"},function(t){var n,e,i,o,u,s=chrome.tabs,f=r.T,c=location.origin.length,a=l.$.Le;for(n=t.length,e=a.length-1;0<=--n;)if(!(i=t[n].url).startsWith(v)&&i.includes("://")&&!i.startsWith("edge"))for(o=t[n].id,u=0;u<e;++u)s.executeScript(o,{file:a[u].slice(c),allFrames:true},f)}),console.log("%cVimium C%c has been %cinstalled%c with %o at %c%s%c.","color:red","color:auto","color:#0c85e9","color:auto",t,"color:#0c85e9",new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toJSON().slice(0,19).replace("T"," "),"color:auto"),l.$.Ae&&console.log("Sorry, but some commands of Vimium C require the permission to run in incognito mode."),e&&(parseFloat(l.$.Me)<=parseFloat(e)||((i=l.Wn).Kn?i.Kn(6e3):i.Kn=true,l.le("notifyUpdate")&&(e="vimium_c-upgrade-notification",o={type:"basic",iconUrl:location.origin+"/icons/icon128.png",title:"Vimium C "+n("Upgrade"),message:n("upgradeMsg",[l.$.De])+n("upgradeMsg2")+"\n\n"+n("clickForMore")},f<67&&(o.isClickable=true),f>=70&&(o.silent=true),chrome.notifications&&chrome.notifications.create(e,o,function(t){var n;if(n=r.T())return n;e=t||e,chrome.notifications.onClicked.addListener(function(t){t===e&&(chrome.notifications.clear(e),a.Fr({u:r.J("vimium://release")}))})}))))}))}),r.Bn=function(t){function n(){if(Math.abs(performance.now()-e)<1e5)i=setTimeout(n,3e5);else{i=0;var t=l.ve;Commands&&(t.keyMappings=null,Commands=null),Exclusions&&Exclusions.Vr.length<=0&&(t.exclusionRules=t.exclusionOnlyFirstMatch=t.exclusionListenHash=null,Exclusions=null)}}var e=0,i=0,o=0;return r.Bn=function(t){t&&(o=o+t>0?o+t:0),o>0||!Commands||!Exclusions||Exclusions.Vr.length>0?i&&(clearTimeout(i),i=0):(e=performance.now(),i=i||setTimeout(n,3e5))},r.Bn(t)},r.Vn(1200,function(){l.Wn.Yn&&chrome.runtime.onInstalled.removeListener(l.Wn.Yn),l.Wn.Yn=null,document.documentElement.innerText="",r.x()});