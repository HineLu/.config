"use strict";var b={v:{__proto__:null,decode:2,decodeuri:2,decodeurl:2,decodecomp:4,matched:1,unescape:8,upper:16,lower:32,normalize:64,reverse:128},j:null,_t:function(n){var t,e,o,i,u,a,c,l,s,_,f,g,d,m=[];for(t=0,e=n.split("\n");t<e.length;t++)if(o=(o=e[t]).trim(),(i=/^([a-z]{1,6})([^\x00- A-Za-z\\])/.exec(o))&&(u="\\u"+(i[2].charCodeAt(0)+65536).toString(16).slice(1),a=i[1],(c=new RegExp("^((?:\\\\"+u+"|[^"+u+"])+)"+u+"(.*)"+u+"([a-zD]{0,9})((,[A-Za-z]+)*)$").exec(o.slice(i[0].length)))&&(s=(l=c[3]).replace(/[dDr]/g,""),_=r.Ln(c[1],s)))){for(f=0,g=0,d=c[4].toLowerCase().split(",");g<d.length;g++)f|=b.v[d[g]]||0;m.push({ft:b.gt(a),dt:f+1*+(l.includes("r")&&!s.includes("g"))+4*+l.includes("d")+2*+l.includes("D"),mt:_,vt:b.pt(c[2])})}return m},pt:function(n){return n.replace(/\\(x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|.)/g,function(n,t){return"x"===t[0]||"u"===t[0]?"$"===(t=String.fromCharCode(parseInt(t.slice(1),16)))?t+t:t:"t"===t?"\t":"r"===t?"\r":"n"===t?"\n":"0"===t?"$&":t>="1"&&t<="9"?"$"+t:t})},Nr:function(n){var t,e;return n?"object"!=typeof n?{r:n,k:""}:(t=n.sed)||(e=n.sedKeys||n.sedKey)?t&&"object"==typeof t?t.r||t.k?t:null:{r:t,k:e}:null:null},gt:function(n){var t,e,r=0;for(t=0;t<n.length;t++)r|=(e=-33&n.charCodeAt(t))<65||e>90?0:83===e?32772:1<<e-65;return r},Mr:function(n,t,e){var o,i,u,a,c,s,_,f,g=!e||"object"!=typeof e,d=g?e:e.r;if(false===d)return n;for(o=b.j||(b.j=b._t(l.le("clipSub"))),d&&true!==d&&(d=(d+"").replace(/(?!\\) ([a-z]{1,6})(?![\x00- A-Za-z\\])/g,"\n$1"),o=o.concat(b._t(d))),t=!g&&e.k?b.gt(e.k):t,i=0,u=0,c=0,s=o;c<s.length;c++)(_=s[c]).ft&t&&(1&_.dt?(n.replace(_.mt,function(n){var t=arguments;return u=(i=t[t.length-2])+n.length,a=t.length>3?t[1]:"",""}),u&&(f=n.replace(_.mt,_.vt),n=f.slice(i,f.length-(n.length-u))||a||n.slice(i,u))):(u=+_.mt.test(n),_.mt.lastIndex=0,n=n.replace(_.mt,_.vt)),u&&(n=2&(i=_.dt)?r.Nn(n):4&i?r.wn(n):n,n=8&i?b.pt(n):n,n=8&i?b.pt(n):n,n=16&i?n.toLocaleUpperCase():n,n=32&i?n.toLocaleLowerCase():n,192&i&&(n=n.normalize()),128&i&&(n=(Array.from?Array.from(n):n.split("")).reverse().join(""))));return r.x(),n},Bt:function(){var n=document.createElement("textarea");return n.style.position="absolute",n.style.left="-99px",n.style.width="0",n},c:function(n,t,e){"string"!=typeof n&&(n="json"===t?JSON.stringify(n,null,2):n.join(t!==!!t&&t||"\n")+(n.length>1&&(!t||t===!!t)?"\n":""));var o=(n=n.replace(r.W," ").replace(/[ \t]+(\r\n?|\n)|\r\n?/g,"\n")).charCodeAt(n.length-1);return 32!==o&&9!==o||((o=n.lastIndexOf("\n")+1)?n=n.slice(0,o)+n.slice(o).trimRight():32!==(o=n.charCodeAt(0))&&9!==o&&(n=n.trimRight())),b.Mr(n,4,e)},ht:function(n,t){return n&&(n=n.replace(r.W," "),n=b.Mr(n,32768,t)),n}},e={kt:function(n,t){return"vimiumContent|"+n+(t?"|"+t:"")},ir:function(t,e){var o=chrome.contentSettings;return o?o[t]&&!/^[A-Z]/.test(t)&&o[t].get?!(r.G.test(e)&&!e.startsWith(v))&&(a.ir(n("changeItsCS")),true):(a.er(n("unknownCS",[t])),true):(a.er("This version of Vimium C has no permissions to set CSs"),true)},St:function(t,e){var o,i,u,c,l,s,_,g,d,m;if(t.startsWith("file:"))return(o=f>=56?1:e>1?2:0)?(a.ir(1===o?n("setFileCS",[56]):n("setFolderCS")),[]):[t.split(/[?#]/,1)[0]];if(t.startsWith("ftp:"))return a.ir(n("setFTPCS")),[];if(i=t.match(/^([^:]+:\/\/)([^\/]+)/),u=r.V.exec(i[2]),c=[(t=i[1])+(l=u[3]+(u[4]||""))+"/*"],e<2||r.en(u[3],0))return c;for(u=null,_=(s=r.cn(l))[0],g=s[1],d=Math.min(_.length-g,e-1),m=0;m<d;m++)l=l.slice(_[m].length+1),c.push(t+l+"/*");return c.push(t+"*."+l+"/*"),d===_.length-g&&"http://"===t&&c.push("https://*."+l+"/*"),c},Ut:function(n){var t,e,r=n.length;do{e=new URL(n[--r].s.u).host,t||(t=e)}while(1<r&&e===t);return e!==t},Ct:function(n,t){var o=chrome.contentSettings,i=o&&o[n];i&&i.clear&&(null==t?(i.clear({scope:"regular"}),i.clear({scope:"incognito_session_only"},r.T),localStorage.removeItem(e.kt(n))):i.clear({scope:t?"incognito_session_only":"regular"}))},Tr:function(t,r){var o=""+t.type;if(!e.ir(o,"http://a.cc/"))return e.Ct(o,r?r.s.a:2===m.nr),a.er(n("csCleared",[n(o)||o]))},xr:function(n,t,r){var o=""+t.type,i=r[0];return t.incognito?e.bt(n,o,i):e.yt(n,o,i,"reopen"===t.action)},yt:function(n,t,o,i){var u=r.un(o.url);e.ir(t,u)||chrome.contentSettings[t].get({primaryUrl:u,incognito:o.incognito},function(c){e.wt(t,u,n,{scope:o.incognito?"incognito_session_only":"regular",setting:c&&"allow"===c.setting?"block":"allow"},function(n){var u,c,l;if(!n)return o.incognito||(u=e.kt(t),"1"!==localStorage.getItem(u)&&localStorage.setItem(u,"1")),l=f>=70&&(c=a.we(o.id))&&c.length>2&&e.Ut(c),o.incognito||i?(++o.index,a.Cr(o)):o.index>0?a.Cr(o,l?0:2):void chrome.windows.getCurrent({populate:true},function(n){return n&&"normal"===n.type?a.Cr(o,l?0:n.tabs.length>1?2:1):chrome.tabs.reload(r.T),r.T()})})})},bt:function(n,t,o){if(l.$.Ae)return a.ir("setIncogCS");var i=r.un(o.url);e.ir(t,i)||chrome.contentSettings[t].get({primaryUrl:i,incognito:true},function(u){return r.T()?(chrome.contentSettings[t].get({primaryUrl:i},function(r){if(!r||"allow"!==r.setting){chrome.windows.create({type:"normal",incognito:true,focused:false,url:"about:blank"},function(r){var u=r.tabs[0].id;return e.At(n,t,o,i,r.id,true,function(){chrome.tabs.remove(u)})})}}),r.T()):u&&"allow"===u.setting&&o.incognito?e.It(o):void chrome.windows.getAll(function(r){if((r=r.filter(function(n){return n.incognito&&"normal"===n.type})).length){if(u&&"allow"===u.setting)return e.It(o,r[r.length-1].id);var a=o.windowId,c=o.incognito&&r.some(function(n){return n.id===a});return e.At(n,t,o,i,c?void 0:r[r.length-1].id)}console.log("%cContentSettings.ensure","color:red","get incognito content settings",u," but can not find an incognito window.")})})},At:function(n,t,r,o,i,u,a){var c=e.Mt.bind(null,r,i,a);return e.wt(t,o,n,{scope:"incognito_session_only",setting:"allow"},u&&i!==r.windowId?function(n){if(n)return c(n);chrome.windows.get(r.windowId,c)}:c)},wt:function(n,t,o,i,u){var a,c,l,s,_=false,f=chrome.contentSettings[n],g=function(){var n=r.T();return n&&console.log("[%o]",Date.now(),n),_||(--m,((_=!!n)||0===m)&&setTimeout(u,0,_)),n},d=e.St(t,0|o),m=d.length;if(m<=0)return u(true);for(r.O(i),a=0,c=d;a<c.length;a++)l=c[a],(s=r.y(r.D(),i)).primaryPattern=l,f.set(s,g)},Mt:function(n,t,r,o){true!==o&&e.It(n,t),r&&r(),true!==o&&t&&chrome.windows.update(t,{focused:true,state:o?o.state:void 0})},It:function(n,t){n.active=true,"number"!=typeof t||n.windowId===t?++n.index:(n.index=void 0,n.windowId=t),a.Cr(n)}},j={dn:localStorage,Tt:null,jt:function(){var n=r.D();return n.setItem=function(n,t){this[n]=t},n},xt:function(n,t,e){var r,o=n.l,u=n.n,a=n.u,c=n.s,l=t?j.Tt||(i.$t(),j.Tt=j.jt()):j.dn;o&&0===c[0]&&0===c[1]&&(2===c.length?(r=a.indexOf("#"))>0&&r<a.length-1&&c.push(a.slice(r)):(c[2]||"").length<2&&c.pop()),l.setItem(j.Ot(u,o?a:""),JSON.stringify(o?c:{tabId:e,url:a,scroll:c}))},zt:function(n,t){n.postMessage({N:10,H:null,c:4,n:1,a:t})},$r:function(n,t){var e=t.s.t;if(n.s)return j.xt(n,t.s.a,e);(t=a.we(e,0)||t)&&t.postMessage({N:11,n:n.n})},jr:function(t,e){var o,i,u,c,l,s,_,f=t.l,g=t.n,d=j.Ot(g,f?t.u:""),m=j.Tt&&e.s.a&&j.Tt[d]||j.dn.getItem(d);return f&&((o=m?JSON.parse(m):null)||(u=void 0,c=void 0,(i=t.o)&&(u=+i.x)>=0&&(c=+i.y)>=0&&(t.s=o=[u,c,i.h],j.xt(t,e.s.a))),o)?j.zt(e,{n:g,s:o,l:2}):m?(s=+(l=JSON.parse(m)).tabId,(_={u:l.url,s:l.scroll,t:l.tabId,n:g,p:true}).p=false!==t.p&&0===_.s[1]&&0===_.s[0]&&!!r.On(_.u),s>=0&&a.we(s)?void chrome.tabs.get(s,j.Nt.bind(0,_)):a.Fr(_)):a.er(n("noMark",[n(f?"Local_":"Global_"),g]))},Nt:function(n,t){var e=(t.url||t.pendingUrl).split("#",1)[0];return e===n.u||n.p&&n.u.startsWith(e)?(a.Lr({s:t.id}),j.wr(n,t)):a.Fr(n)},Ot:function(n,t){return(t?"vimiumMark|"+r.Dn(t.split("#",1)[0]):"vimiumGlobalMark")+"|"+n},wr:function(n,t){var e=t.id,r=a.we(e,0);if(r&&j.zt(r,{n:n.n,s:n.s,l:0}),n.t!==e&&n.n)return j.xt(n,2===m.nr,e)},Er:function(t){var e,r,o,i,u,c,l,s=j.Ot("",t),_=[],f=j.dn;for(e=0,r=f.length;e<r;e++)(o=f.key(e)).startsWith(s)&&_.push(o);for(i=0,u=_;i<u.length;i++)f.removeItem(o=u[i]);if(c=_.length,j.Tt)for(o in l=j.Tt)o.startsWith(s)&&(c++,delete l[o]);return a.er(n("markRemoved",[c,n(t?"41":"39"),n(1!==c?"have":"has")]))}},h={et:"findModeRawQueryList",Rt:null,Vt:null,Wt:0,Dt:function(){var n=l.le(h.et);h.Rt=n?n.split("\n"):[],h.Dt=null},Sr:function(n,t,e){var o,u,a=h;return a.Dt&&a.Dt(),o=n?a.Vt||(i.$t(),a.Vt=a.Rt.slice(0)):a.Rt,t?(t=t.replace(/\n/g," "),n?a.Ft(t,o,true):((u=a.Ft(t=r.R(t,0,99),o))&&l.fe(a.et,u),a.Vt?a.Ft(t,a.Vt,true):void 0)):o[o.length-(e||1)]||""},Ft:function(n,t,e){var r=t.lastIndexOf(n);if(r>=0){if(r===t.length-1)return;t.splice(r,1)}else t.length>=50&&t.shift();if(t.push(n),!e)return t.join("\n")},Pr:function(n){n?h.Vt&&(h.Vt=[]):(h.Dt=null,h.Rt=[],l.fe(h.et,""))}},i={Lt:false,Wt:0,$t:function(){i.Lt||(chrome.windows.onRemoved.addListener(i.Jt),i.Lt=true)},Jt:function(){i.Lt&&(i.Wt=i.Wt||setTimeout(i.Zt,34))},Zt:function(){var n,t,e;if(i.Wt=0,f>=52){for(e in n=false,t=a.we())if(t[+e][0].s.a){n=true;break}if(n)return}chrome.windows.getAll(function(n){n.some(function(n){return n.incognito})||i.Kt()})},Kt:function(){h.Vt=null,j.Tt=null,chrome.windows.onRemoved.removeListener(i.Jt),i.Lt=false}},k={Pt:[f>=74?2:0,f>=76?2:0],Gt:0,le:function(n){var t=k.Pt[n];return"object"==typeof t?t.matches:null},qt:function(n,t){var e,r=k,o=r.Pt,i=o[n],u=n?"prefers-color-scheme":"prefers-reduced-motion";1===i&&t&&(o[n]=i=matchMedia("("+u+")").matches?2:0),t&&2===i?((e=matchMedia("("+u+": "+(n?"dark":"reduce")+")")).onchange=r.Et,o[n]=e,r.Gt||f<999&&(r.Gt=setInterval(k.Ht,6e4)),r.Qt(n,0)):t||"object"!=typeof i||(i.onchange=null,o[n]=2,r.Gt>0&&(o.some(function(n){return"object"==typeof n})||(clearInterval(r.Gt),r.Gt=0)),r.Qt(n,0))},Qt:function(n,t){var e,r,o,i,u,c,s=k.Pt[n];r=(e=l).te,o=n?"dark":"less-motion",c=e.pe(u=n?"d":"m",i=!!("object"==typeof s)&&s.matches),r[u]!==c&&(r[u]=c,t||e.be({N:6,d:[u]})),a.qr({t:o,e:i||(" "+e.dn.vomnibarOptions.styles+" ").includes(" "+o+" "),b:!t})},Ht:function(){var n,t;for(t=(n=k.Pt).length;0<=--t;)"object"==typeof n[t]&&k.Qt(t)},Et:function(){k.Gt>0&&clearInterval(k.Gt),k.Gt=-1;var n=k.Pt.indexOf(this);n>=0&&k.Qt(n)}},m={Ir:r.D(),tr:chrome.tabs.TAB_ID_NONE||-1,_r:chrome.windows.WINDOW_ID_NONE||-1,ur:-1,nr:1,Rr:null};r.Vn(120,function(){function n(n){var t=performance.now();t-f>666&&(c[m.tr]=++_,_>=2047&&(function(){var n,t=c;for(n in t)t[n]<1025?delete t[n]:t[n]-=1024;_=1024})()),m.tr=n.tabId,f=t}function t(t){if(!t||!t[0])return r.T();var e=t[0],o=e.windowId,i=m._r;return o!==i&&(m._r=o,m.ur=i),m.nr=e.incognito?2:1,d.Xt(),n({tabId:e.id})}var o,i,u,a,c=m.Ir,s=m._r,_=1,f=0;for(chrome.tabs.onActivated.addListener(n),chrome.windows.onFocusChanged.addListener(function(n){n!==s&&chrome.tabs.query({windowId:n,active:true},t)}),chrome.tabs.query({currentWindow:true,active:true},function(n){f=performance.now();var t=n&&n[0];if(!t)return r.T();m.tr=t.id,m._r=t.windowId,m.nr=t.incognito?2:1}),m.Rr=function(n,t){return c[t.id]-c[n.id]},(o=l).ve.autoDarkMode=o.ve.autoReduceMotion=function(n,t){k.qt(t.length>12?0:1,n)},o.ge("autoDarkMode"),o.ge("autoReduceMotion"),o.ke=k.Qt,o.Se=k.Ht,i=0,u=["images","plugins","javascript","cookies"];i<u.length;i++)a=u[i],null!=localStorage.getItem(e.kt(a))&&setTimeout(e.Ct,100,a)}),r.gn=function(n,t,e){if(n=b.c(n,t,e)){var r=document,o=b.Bt();o.value=n,r.documentElement.appendChild(o),o.select(),r.execCommand("copy"),o.remove(),o.value=""}return n},r.yn=l.$.ze?function(n){var t,e=b.Bt();return e.maxLength=8192,document.documentElement.appendChild(e),e.focus(),document.execCommand("paste"),t=e.value.slice(0,8192),e.value="",e.remove(),e.removeAttribute("maxlength"),b.ht(t,n)}:function(){return null},r.Sn=b.Mr,l.ve.clipSub=function(){b.j=null},l.Wn.ne=function(){var t,e,r;for(l.Wn.ne=null,t=l.ie=[],e=["$1","$2","$3","$4"],r=0;r<97;r++)t.push(n(""+r,e))},l.Wn.Jn|=2,a.Xe(),chrome.extension.isAllowedIncognitoAccess(function(n){l.$.Ae=false===n});