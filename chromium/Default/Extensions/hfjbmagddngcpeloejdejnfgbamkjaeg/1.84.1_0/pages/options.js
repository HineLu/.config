"use strict";function T(){var t=this,n=t.yu;n.ondragstart=function(n){(t.ts=n.target).style.opacity="0.5"},n.ondragend=function(){var n=t.ts;t.ts=null,n&&(n.style.opacity="")},n.ondragover=function(t){return t.preventDefault()},n.ondrop=function(n){var i,e,o,r,s;n.preventDefault(),i=t.ts,e=(e=n.target).closest(".exclusionRule"),i&&e&&i!==e&&(t.yu.insertBefore(i,e),o=t.Rt,r=i.querySelector(".pattern").vnode,s=e.querySelector(".pattern").vnode,o.splice(o.indexOf(r),1),o.splice(o.indexOf(s),0,r),t.eu())}}function B(t){var n=document.createElement("script");return n.src=t,document.head.appendChild(n),n}function G(){null==G.ns&&(G.ns=this.id,B("options_checker.js"))}function V(){function t(){var t,n,i,e,o,r=_.Vo;for(t in r)"object"==typeof(i=(n=r[t]).iu)&&i&&(n.iu=N.le(n.nu));e=false,o=false,_.Vo.exclusionRules.Rt.length>0?e=o=true:_.Vo.keyMappings.lu&&(o=true),e&&!u.Exclusions&&u.r.pn("Exclusions"),o&&!u.Commands&&u.r.pn("Commands"),u.r.Bn(1)}u.removeEventListener("unload",V),setTimeout(function(){if(u=chrome.extension.getBackgroundPage(),!u)return window.onbeforeunload=null,void window.close();N=u.l,N?(u.addEventListener("unload",V),"loading"===u.document.readyState?u.addEventListener("DOMContentLoaded",function n(){u.removeEventListener("DOMContentLoaded",n,true),setTimeout(t,100)},true):setTimeout(t,67)):u=null},200)}function E(t){var n=document.createEvent("MouseEvents");return n.initMouseEvent("click",true,true,window,1,0,0,0,0,false,false,false,false,0,null),t.dispatchEvent(n)}function M(t){var n,i,e,o,r=t.length>1?"Errors:\n":"Error: ";for(e=0,o=t;e<o.length;e++)n=0,r+=(i=o[e])[0].replace(/%([a-z])/g,function(t,e){return++n,"c"===e?"":"s"===e||"d"===e?i[n]:JSON.stringify(i[n])}),n+1<i.length&&(r+=" "+i.slice(n+1).map(function(t){return"object"==typeof t&&t?JSON.stringify(t):t}).join(" ")+".\n");return r}var C,L,H,D,z,F,U,P,W;_.wu=[],_.prototype.uu=function(t){t.call(this),window.VApi&&N.pe(N.he[this.nu],this.mu(),VApi.z)},_.is=function(){var t,n,i=_.Vo,e=[];for(t in i)(n=i[t]).ou||n.gu(n.iu,N.le(n.nu))||e.push(n.nu);if(e.length>0&&!confirm(s("dirtyOptions",[e.join("\n  * ")])))return false;for(t in i)if(!(n=i[t]).ou&&!n.du())return false;for(t in i.vimSync.ou||i.vimSync.vu(),i.exclusionRules.ou||i.exclusionRules.vu(),i)i[t].ou||i[t].vu();return true},_.es=function(){var t,n=_.Vo;for(t in n)if(!n[t].ou)return true;return false},_.prototype.gu=function(t,n){return t===n},C=(function(t){function n(i,e){var o,r,s=t.call(this,i,e)||this;return s.lu={min:(o=i.min)&&!isNaN(r=parseFloat(o))?r:null,max:(o=i.max)&&!isNaN(r=parseFloat(o))?r:null,default:N.se[s.nu],hu:n.os},s.tu.oninput=s.eu,s.tu.onfocus=s.rs.bind(s),s.tu.setAttribute("autocomplete","off"),s}return y(n,t),n.prototype.au=function(t){this.tu.value=""+t},n.prototype.mu=function(){return parseFloat(this.tu.value)},n.prototype.rs=function(){var t=this,n=this.tu,i=function(n){return t.ss(n)},e=function(){n.removeEventListener("wheel",i,{passive:false}),n.removeEventListener("blur",e),t.us=0};this.us=0,n.addEventListener("wheel",i,{passive:false}),n.addEventListener("blur",e)},n.prototype.ss=function(t){var n,i,e,o,r,s,u,a;if(t.preventDefault(),n=this.us,!((i=Date.now())-n<100&&i+99>n&&n>0))return this.us=i,r=(e=this.tu).value,"function"==typeof(u=(o=(t.deltaY||t.deltaX)>0)?e.stepUp:e.stepDown)?(u.call(e),s=e.value,e.value=r):(a=(u=parseFloat)(e.step)||1,i=(+e.value||0)+(o?a:-a),isNaN(a=u(e.max))||(i=Math.min(i,a)),isNaN(a=u(e.min))||(i=Math.max(i,a)),s=""+i),this.as(s,n>0,false)},n.os=function(t){return isNaN(t)&&(t=this.default),t=null!=this.min?Math.max(this.min,t):t,null!=this.max?Math.min(this.max,t):t},n})(_),L=(function(t){function n(i,e){var o=t.call(this,i,e)||this,r=o.tu.dataset.converter||"",s=r?r.split(" "):[];return o.tu.oninput=o.eu,s.length>0&&(o.lu={cs:s,li:0,hu:n.fs}),o.tu.setAttribute("autocomplete","off"),o}return y(n,t),n.prototype.su=function(){t.prototype.su.call(this);var n=this.lu;n&&(n.li=0,n.li=n.hu(this.iu)===this.iu?1:0)},n.prototype.au=function(t,n){var i=t.replace(/ /g,"\xa0");true!==n?this.tu.value=i:this.as(i,true,true)},n.prototype.hs=function(){return this.tu.value.trim().replace(/\xa0/g," ")},n.prototype.mu=function(){var t=this.hs(),n=this.lu;return t&&n&&(n.li|=2,t=n.hu(t),n.li&=-3),t},n.prototype.pu=function(t){return t!==this.hs()},n.fs=function(t){var n,i,e,o,r=this.cs;if(r.indexOf("lower")>=0?t=t.toUpperCase().toLowerCase():r.indexOf("upper")>=0&&(t=t.toLowerCase().toUpperCase()),t=t.normalize(),r.indexOf("chars")<0||2&this.li&&!(1&this.li))return t;for(n="",i=0,e=t.replace(/\s/g,"");i<e.length;i++)n.includes(o=e[i])||(n+=o);return n},n})(_),H=(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return y(n,t),n.prototype.mu=function(){var n=t.prototype.mu.call(this);return n||(n=N.se[this.nu],this.au(n,true)),n},n})(L),L.prototype.as=C.prototype.as=function(t,n,i){n&&(this.ls=true,document.activeElement!==this.tu&&this.tu.focus(),document.execCommand("undo")),this.ls=i,this.tu.select(),document.execCommand("insertText",false,t),this.ls=false},D=(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return y(n,t),n.prototype.au=function(n,i){var e=this.tu instanceof HTMLInputElement,o=JSON.stringify(n,null,e?1:2),r=e?o.replace(/(,?)\n\s*/g,function(t,n){return n?", ":""}):o;t.prototype.au.call(this,r,i)},n.prototype.mu=function(){var n=t.prototype.mu.call(this),i=null;if(n)try{i=JSON.parse(n)}catch(t){}else i=N.se[this.nu],this.au(i,true);return i},n})(L),z=(function(t){function n(n,i){var e=t.call(this,n,i)||this;return e._s=true,O(function(){e.tu.classList.add("masked")}),e.ps=e.ds.bind(e),e.tu.addEventListener("focus",e.ps),e}return y(n,t),n.prototype.ds=function(){this.ps&&(this.tu.removeEventListener("focus",this.ps),this.tu.classList.remove("masked"),this.ps=null,this._s=false,this.tu.removeAttribute("placeholder"),this.su())},n.prototype.au=function(n,i){if(this._s){var e=this.tu.dataset.mask||"";(e=s(e||"clickToUnmask")||e)&&(this.tu.placeholder=e)}else t.prototype.au.call(this,n,i)},n.prototype.mu=function(){return this._s?this.iu:t.prototype.mu.call(this)},n})(L),D.prototype.gu=_.xu,F=(function(t){function n(i,e){var o=t.call(this,i,e)||this,r=i.dataset.map;return o.gs=r?JSON.parse(r):o.tu.dataset.allowNull?n.ms:n.vs,o.bs=o.gs.length-1,o.bs>1&&"vimSync"!==o.nu&&o.tu.addEventListener("change",o.onTripleStatusesClicked.bind(o),true),o.tu.onchange=o.eu,o}return y(n,t),n.prototype.au=function(t){this.tu.checked=t===this.gs[this.bs],this.tu.indeterminate=this.bs>1&&t===this.gs[1],this.ws=Math.max(0,this.gs.indexOf(t))},n.prototype.mu=function(){return this.tu.indeterminate?this.gs[1]:this.gs[this.tu.checked?this.bs:0]},n.prototype.onTripleStatusesClicked=function(t){t.preventDefault();var n=this.ws;this.ws=2===n?1:n?0:2,this.tu.indeterminate=2===n,this.tu.checked=2===this.ws},n.vs=[false,true],n.ms=[false,null,true],n})(_),J.prototype.Su=function(n){var i,e,o,r,s,a;if(this.Rt.length===n)for(n&&!u.Exclusions&&u.r.pn("Exclusions"),e=(i=t("#exclusionToolbar")).querySelectorAll("[data-model]"),i.style.visibility=n?"":"hidden",o=0,r=e.length;o<r;o++)(a=(s=_.Vo[e[o].id]).tu.parentNode.style).visibility=n||s.ou?"":"visible",a.display=!n&&s.ou?"none":""},L.prototype.Os=function(t,n,i){var e,o,r,s;null!=i||(i=!!t),o=(e=this.tu).classList,r=e.parentElement,s=(s=e.nextElementSibling)&&s.classList.contains("tip")?s:null,O(function(){i?(null==s&&((s=document.createElement("div")).className="tip",r.insertBefore(s,e.nextElementSibling)),s.textContent=t,null!==n&&o.add(n||"has-error")):(o.remove("has-error"),o.remove("highlight"),s&&s.remove())})},A&&O(A),O(function(t){var n=document.documentElement.classList,i=function(){removeEventListener("DOMContentLoaded",i),N.te.d&&n.add("auto-dark"),N.te.m&&n.add("less-motion")};addEventListener("DOMContentLoaded",i),t.textContent=N.$.De},t(".version")),U=function(){function n(){this.ls||((this.ou=this.gu(this.mu(),this.iu))?k&&!_.es()&&(T.disabled=true,T.firstChild.data=s("o115"),x.disabled=false,k=false,window.onbeforeunload=null):k||(window.onbeforeunload=e,k=true,T.disabled=false,T.firstChild.data=s("o115_2"),x.disabled=true))}function i(t){N.be({N:6,d:t.map(function(t){return N.he[t]})})}function e(){return s("beforeUnload")}var o,r,a,c,f,h,l,p,d,g,m,v,b,T=t("#saveOptions"),x=t("#exportButton"),k=false;for(T.onclick=function(t){if(false===t||_.is()){var n=_.wu;_.wu=[],this.disabled=true,this.firstChild.data=s("o115_3"),x.disabled=false,k=false,window.onbeforeunload=null,0!==n.length&&setTimeout(i,100,n)}},o=false,(r=t("#advancedOptionsButton")).onclick=function(n,i){var e,r=this;null==i||"hash"===i&&false===N.le("showAdvancedOptions")?(o=!o,N.fe("showAdvancedOptions",o)):o=N.le("showAdvancedOptions"),e=t("#advancedOptions"),O(function(){e.previousElementSibling.style.display=e.style.display=o?"":"none";var t=o?"Hide":"Show";r.firstChild.data=s(t)||t,r.setAttribute("aria-checked",""+o)},9)},r.onclick(null,true),a=w("[data-model]"),c={Number:C,Text:L,NonEmptyText:H,JSON:D,MaskedText:z,Boolean:F,ExclusionRules:J},f=a.length;0<=--f;)(h=new(0,c[(r=a[f]).dataset.model])(r,n)).su(),_.Vo[h.nu]=h;for(O(function(){var t,n,i=_.Vo;for(t in _.cu=false,i)(n=i[t]).au(n.iu)}),_.Vo.exclusionRules.iu.length>0&&O(function(t){t.style.visibility=""},t("#exclusionToolbar")),f=(a=w("[data-check]")).length;0<=--f;)(r=a[f]).addEventListener(r.dataset.check||"input",G);for(document.addEventListener("keyup",function(t){var n=t.target,i=t.keyCode;if(13===i){if(n instanceof HTMLAnchorElement)n.hasAttribute("href")||setTimeout(function(t){E(t),t.blur()},0,n);else if((t.ctrlKey||t.metaKey)&&(n.blur&&n.blur(),k))return T.onclick()}else{if(32!==i)return;n instanceof HTMLSpanElement&&n.parentElement instanceof HTMLLabelElement&&(t.preventDefault(),E(n.parentElement.control))}}),l=function(){var n,i,e=t("#"+this.dataset.autoResize),o=e.scrollHeight,r=e.scrollWidth,s=r-e.clientWidth;o<=e.clientHeight&&s<=0||(n=Math.max(Math.min(innerWidth,1024)-120,550),e.style.maxWidth=r>n?n+"px":"",e.style.height=e.style.width="",i=e.offsetHeight-e.clientHeight,o+=i=(s=r-e.clientWidth)>0?Math.max(26,i):i+18,s>0&&(e.style.width=e.offsetWidth+s+4+"px"),e.style.height=o+"px")},f=(a=w("[data-auto-resize]")).length;0<=--f;)a[f].onclick=l;for(l=function(t){var n=this.dataset.delay,i=null;"continue"!==n&&t&&t.preventDefault(),"event"===n&&(i=t||null),window.Ts=["#"+this.id,i],"complete"!==document.readyState?window.addEventListener("load",function t(n){n.target===document&&(window.removeEventListener("load",t),B("options_ext.js"))}):B("options_ext.js")},f=(a=w("[data-delay]")).length;0<=--f;)a[f].onclick=l;if(S<53)for(l=function(t){t.target===this&&(t.preventDefault(),getSelection().selectAllChildren(this))},f=(a=w(".sel-all")).length;0<=--f;)a[f].onmousedown=l;for((p=_.Vo.keyMappings).ru=function(){var t,n,i=u.c.it,e=i?M(i):"";N.te.l&&!e&&(t=Object.keys(u.c.gr).join(""),t+=(n=u.c.vr)?Object.keys(n).join(""):"",/[^ -\xff]/.test(t))?this.Os(s("ignoredNonEN"),null):this.Os(e)},p.ru(),d=_.Vo.linkHintCharacters,g=_.Vo.linkHintNumbers,p=m=_.Vo.filterLinkHints,d.ru=g.ru=function(){this.Os(!this.tu.style.display&&this.iu.length<4?s("70"):"")},p.ru=function(){O(function(t){var n=m.mu();t.style.display=g.tu.style.display=n?"":"none",d.tu.style.display=n?"none":"",d.ru(),g.ru()},t("#waitForEnterBox"))},p.ru(),p.tu.addEventListener("change",p.ru.bind(p),true),(p=_.Vo.vomnibarPage).ru=function(){var t=this.tu,n=this.iu,i=n.startsWith(location.protocol)||n.startsWith("front/");if(S<50)return O(function(){t.style.textDecoration=i?"":"line-through"}),this.Os(n===N.se.vomnibarPage?"":s("onlyExtVomnibar",[50]),null);if(n=N.dn.vomnibarPage_f||n,i);else{if(n.startsWith("file:"))return this.Os(s("fileVomnibar"),"highlight");if(/^http:\/\/(?!localhost[:/])/i.test(n))return this.Os(s("httpVomnibar"),"highlight")}return this.Os("")},p.ru(),(a=w("[data-permission]")).length>0&&(function(t){function n(){var t,n=this.querySelector("[data-permission]");this.onclick=null,n&&(t=n.dataset.permission,n.placeholder=s("lackPermission",[t?': "'+t+'"':""]))}var i,e,o,r,u=chrome.runtime.getManifest();for(i=0,e=u.permissions||[];i<e.length;i++)u[e[i]]=true;for(o=function(i){var e=t[i],o=e.dataset.permission;if("C"===o[0]){if(S>=+o.slice(1))return"continue";o=s("beforeChromium",[o.slice(1)])}else{if(o in u)return"continue";o=s("lackPermission",[o?":\n* "+o:""])}o=s("invalidOption",[o]),O(function(t){t.disabled=true,t instanceof HTMLInputElement&&"checkbox"===t.type?(t.nextElementSibling.tabIndex=-1,(t=t.parentElement).title=o):(t.value="",t.title=o,t.parentElement.onclick=n)},e)},r=t.length;0<=--r;)o(r)})(a),0===u.l.$.Ye.length&&O(function(t){for(var n=t.length;0<=--n;)t[n].remove()},w(".require-shortcuts")),O(function(t){var n,i,e;for(n=t.length;0<=--n;)e=(i=t[n]).dataset.href,e=u.r.J(e,null,-1),i.removeAttribute("data-href"),i.setAttribute("href",e)},w("[data-href]")),r=t("#openExtensionPage"),S<65&&(r.href="chrome://extensions/configureCommands"),r.onclick=function(t){t.preventDefault(),u.a.Fr({u:this.href,r:1,p:true})},O(function(t){t.children[1].title=s("NewTabAdapter")+" - "+s("webstore")},t("#chromeExtVomnibar")),v=function(){var n=this;O(function(t){t.textContent=s(n.iu?"o145_2":"o144")},t("#"+this.tu.id+"Status"))},b=function(n){o||t("#advancedOptionsButton").onclick(null),n.preventDefault();var i=_.Vo[this.getAttribute("for")].tu.nextElementSibling;S<61?i.scrollIntoViewIfNeeded():i.scrollIntoView({block:"center"}),i.focus(),window.VApi&&VApi.x(i.parentElement.parentElement)},f=(a=w(".ref-text")).length;0<=--f;)(p=_.Vo[a[f].getAttribute("for")]).ru=v,p.ru(),a[f].onclick=b},P=function(){var n,i,e,o,r,s;U(),N.te.o||O(function(t){t.textContent="Cmd"},t("#Ctrl")),(n=_.Vo.newTabUrl).lu={hu:function(t){var n=/^\/?pages\/[a-z]+.html\b/i.test(t)?chrome.runtime.getURL(t):u.r.J(t.toLowerCase());return n=n.split("?",1)[0].split("#",1)[0],t.startsWith("http")||!(n in N.ue)&&!/^(?!http|ftp)[a-z\-]+:\/?\/?newtab\b\/?/i.test(t)?t:N.se.newTabUrl}},n.lu.hu(n.iu),(i=_.Vo.ignoreKeyboardLayout).ru=function(){O(function(t){t.style.display=i.mu()?"none":""},t("#ignoreCapsLockBox"))},i.ru(),i.tu.addEventListener("change",i.ru.bind(i),true),_.Vo.userDefinedCss.ru=function(){var t,n;window.VApi&&VApi.z&&(t=VApi.y().r,(n=t&&t.querySelector("style.debugged"))&&setTimeout(function(){var i,e,o,r,s,u;for(n.remove(),e=0,o=(i=t.querySelectorAll("iframe")).length;e<o;e++)s=(r=i[e]).classList.contains("HUD"),(u=r.contentDocument.querySelector("style.debugged"))&&(s?u.remove():u.classList.remove("debugged"));_.Vo.userDefinedCss.tu.classList.remove("debugging")},500))},e=_.Vo.autoDarkMode,o=_.Vo.autoReduceMotion,e.ru=function(){document.documentElement.classList.toggle("auto-dark",this.iu)},o.ru=function(){document.documentElement.classList.toggle("less-motion",this.iu)},e.ru(),o.ru(),_.Vo.exclusionRules.Ru=T,U=P=null,window.onhashchange(),S>76&&((r=matchMedia("(prefers-color-scheme: dark)")).onchange=function(){N.Se(),s(),setTimeout(s,34)},s=function(){var t,n,i,e=_.Vo.autoDarkMode;e.iu&&e.ou&&window.VApi&&VApi.z&&(t=r.matches,i=(n=VApi.y().r)&&n.querySelector(".HUD:not(.UI)"),N.pe("d",t,VApi.z),i&&i.classList.toggle("D",t))},setTimeout(s,800))},t("#userDefinedCss").addEventListener("input",R(function(){var t,n,i,e,o,r,s,a=_.Vo.userDefinedCss;!a.ou&&window.VApi&&VApi.z&&(n=(t=a.mu())===a.iu,i=N.xe(t,1),e=VApi.y().r,!a.tu.classList.contains("debugging")&&u&&chrome.tabs.query({currentWindow:true,active:true},function(t){if(t&&t[0]&&t[0].url===location.href){var n=u.a.we(t[0].id,0);n&&(n.s.f|=36)}}),a.tu.classList.toggle("debugging",!n),VApi.t({k:e||n?0:1,t:"Debugging CSS\u2026",H:i.ui,f:N.Te(i.find)}),(r=(o=e&&e.querySelector("iframe.Omnibar"))&&o.contentDocument)&&((s=r.querySelector("style.debugged")||r.querySelector("style#custom"))||((s=r.createElement("style")).type="text/css",s.id="custom"),s.parentNode||r.head.appendChild(s),s.classList.add("debugged"),s.textContent=(n?"\n":"\n.transparent { opacity: 1; }\n")+(i.omni&&i.omni+"\n"||"")))},1200,t("#userDefinedCss"),0));t("#importButton").onclick=function(){var n=t("#importOptions");n.onchange?n.onchange(null):E(t("#settingsFile"))},O(function(n){var i,e,o=N.$.Ge;n.textContent=(u.p?["MS Edge"]:/\bChromium\b/.exec(navigator.appVersion)||["Chrome"])[0]+" "+S+s("comma")+(s(o)||o[0].toUpperCase()+o.slice(1)),u.p&&((i=t("#chromeExtVomnibar")).nextElementSibling.remove(),i.parentElement.classList.add("line-input"),i.remove(),(i=t("#shortcutHelper")).previousElementSibling.textContent=s("period"),i.remove(),(e=t("#openExtensionPage")).textContent=e.href="edge://extensions/shortcuts")},t("#browserName")),document.addEventListener("keydown",function(n){var i,e,o,r,s;if(32===n.keyCode)"span"===(s=n.target).localName&&"label"===s.parentElement.localName&&n.preventDefault();else{if(!window.VApi||!VApi.z||"input textarea".includes(document.activeElement.localName))return;"a-f12"===(i=VApi.m({c:" ",e:n,i:n.keyCode},9))?(e=t("#importOptions"),o=e.selectedIndex,r=function(){e.onchange&&e.onchange(),e.selectedIndex=o},t("#recommendedSettings").selected=true,null!=e.onchange?r():setTimeout(r,100)&&e.click()):"?"===i&&t("#showCommands").click()}}),window.onhashchange=function(){var n,i=location.hash;(i=i.slice("!"===i[1]?2:1))&&/^[a-z][a-z\d_-]*$/i.test(i)&&((n=t('[data-hash="'+i+'"]'))?n.onclick&&O(function(){n.onclick(null,"hash")}):(n=t("#"+i))&&O(function(){n.dataset.model&&n.classList.add("highlight");var t=function(t){t&&t.target!==window||(window.onload&&(window.onload=null,window.scrollTo(0,0)),n.scrollIntoViewIfNeeded())};if("complete"===document.readyState)return t();window.scrollTo(0,0),window.onload=t}))},N.Ue&&N.Ue()?N.Ue().then(P):P(),window.onunload=function(){u.removeEventListener("unload",V),u.r.Bn(-1)},u.r.Bn(1),u.addEventListener("unload",V),(W=u.c.zr["?"])&&5===W.sr||(function(){var n,i=u.c.zr,e="";for(n in i)5===i[n].sr&&(e=e&&e.length<n.length?e:n);e&&O(function(t){return t.textContent=e},t("#questionShortcut"))})(),document.addEventListener("click",function t(){var n=window.VApi,i=n&&n.y();i&&i.r&&(document.removeEventListener("click",t,true),i.r.addEventListener("click",function(t){var n,i=t.target;VApi&&i.classList.contains("HelpCommandName")&&(n=i.textContent.slice(1,-1),VApi.p({H:16,s:n}))},true))},true);