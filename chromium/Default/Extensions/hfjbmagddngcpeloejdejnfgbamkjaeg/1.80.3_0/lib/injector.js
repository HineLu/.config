"use strict";var requestIdleCallback,VimiumInjector=VimiumInjector||{id:"",alive:-1,host:"",version:"",cache:null,clickable:void 0,reload:null,checkIfEnabled:null,$h:"",$m:null,$r:null,$p:null,getCommandCount:null,destroy:null};(function(t,n){function e(t){var e,i,r,a,f,m,h,v,p,b,E,C,$,L,T,g,k=c.lastError;if(t||(r=k&&k.message,a=c.id||location.host||location.protocol,i=!!(r&&r.lastIndexOf("not exist")>=0&&c.id),false===t?e=": not in the allow list.":!i&&k?e=r?":\n\t"+r:": no backend found.":s>3?(e=r?":\n\t"+r:": retried but failed ("+t+").",i=false):(setTimeout(o,200*s),s++,i=true),i||(f="color:red",m="color:auto",console.log("%cVimium C%c: %cfail%c to inject into %c%s%c %s",f,m,f,m,"color:#0c85e9",a,m,e||" ("+s+" retries)."))),h=VimiumInjector&&VimiumInjector.clickable,VimiumInjector&&"function"==typeof VimiumInjector.destroy&&VimiumInjector.destroy(true),VimiumInjector={id:d,alive:0,host:d,version:t?t.version:"",cache:null,clickable:h,reload:n(l),checkIfEnabled:null,$h:t?t.h:"",$m:function(t){VimiumInjector&&VimiumInjector.$r(t.t)},$r:function(){},$p:null,getCommandCount:null,destroy:null},v=document.documentElement,!(t&&v instanceof HTMLHtmlElement))return k;for(b=(p=document.contains(u)?u:(document.head||v).lastChild).nextSibling,E=p.parentElement,C=[],$=0,L=t.s;$<L.length;$++)T=L[$],(g=document.createElement("script")).type="text/javascript",g.async=false,g.src=T,E.insertBefore(g,b),C.push(g);C.length>0&&(C[C.length-1].onload=function(){this.onload=null;for(var t=C.length;0<=--t;)C[t].remove()})}function o(){c.sendMessage(d,{handler:99,scripts:true},e)}function i(){removeEventListener("DOMContentLoaded",i),a?a(function(){a(function(){setTimeout(o,0)},{timeout:67})},{timeout:330}):setTimeout(o,67)}var c=chrome.runtime,u=document.currentScript,l=u.src,r=l.indexOf("://")+3,a=window.requestIdleCallback,s=1,d=l.slice(r,l.indexOf("/",r));VimiumInjector.id=d=u.dataset.extensionId||d,"loading"!==document.readyState?i():addEventListener("DOMContentLoaded",i,true)})(0,function(t){return function(n){function e(){var e,o=document.documentElement;o&&((e=document.createElement("script")).type="text/javascript",e.async=false,e.src=t,console.log("%cVimium C%c begins to reload%s.","color:red","color:auto",1===n?" because it has been updated.":""),(document.head||document.body||o).appendChild(e))}var o,i=VimiumInjector;i&&(o=i.clickable,"function"==typeof i.destroy&&i.destroy(true),i.clickable=o),n?setTimeout(e,200):e()}}),(!document.currentScript||"false"!==(document.currentScript.dataset.vimiumHooks||"").toLowerCase())&&null!==VimiumInjector.clickable&&(function(){var t,n,e,o,i,c,u,l,r;VimiumInjector.clickable=VimiumInjector.clickable?VimiumInjector.clickable:new WeakSet,t=EventTarget,true!==(e=(n=t.prototype).addEventListener).vimiumHooked&&(o=HTMLAnchorElement,i=Element,c=n.addEventListener=function addEventListener(t,n){var c,u,l;return"click"===t&&!(this instanceof o)&&n&&this instanceof i&&(c=VimiumInjector)&&c.clickable&&c.clickable.add(this),2===(l=(u=arguments).length)?e.call(this,t,n):3===l?e.call(this,t,n,u[2]):e.apply(this,u)},l=(u=Function.prototype).toString,r=u.toString=function toString(){return l.apply(this===c?e:this===r?l:this,arguments)},c.vimiumHooked=true,t.vimiumRemoveHooks=function(){delete t.vimiumRemoveHooks,n.addEventListener===c&&(n.addEventListener=e),u.toString===r&&(u.toString=l)},c.prototype=r.prototype=void 0)})();